<html><title>Infernal Throne</title><link rel="shortcut icon" sizes="64x64"/><style>canvas{width:100%;}body{overflow:none;background:#000;margin:0px;font-family:sans-serif;}h1{color:#fff;position:absolute;margin:20px;}</style><h1>ðŸ”¥ INFERNAL THRONE ðŸ‘‘<br>press any key</h1><canvas/><script>var n={};function a0(t,e){(n[t]||(n[t]=[])).push(e)}function o0(t,e){n[t]=(n[t]||[]).filter(t=>t!=e)}function r0(t,e){(n[t]||[]).map(t=>t(e))}var q=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],g=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]],v=[[["#4af",2,0],[10,-12,15,12,-15,12,0,0,-10,0]],[["#4af",2,0],[10,-15,-10,-7,10,0,-10,7,10,15]],[["#4af",2,0],[0,-18,0,-5,12,0,0,12,-12,0]],[["#4af",2,0],[-15,-11,-15,11,0,11,0,-11,15,-11,15,11]],[["#4af",2,0],[0,-15,10,0,0,15,-10,0,0,-15]]],d=["The Crossroads","Undergrowth","Boneyard Caverns","Fields of Mourning","Throne Room"],b=document.getElementsByTagName("canvas")[0],x=(b.width=window.innerWidth,b.height=window.innerHeight*b.width/window.innerWidth,b.getContext("2d"));function i0(t,e){x.strokeStyle=t,x.fillStyle=e||t}function J(t,e,n,a){x.translate(e,n),x.scale(t,a||t),x.translate(-e,-n)}function h0(e,t,n,a,o,r,i=null){var h=x.getTransform(),s=(x.translate(t,n),x.rotate(r),Math.cos(o)),f=Math.sin(o);let l=a;for(let t=0;t<e.length;t++){var u=e[t];if(3==u.length)i0(u[0],i||u[0]),x.lineWidth=u[1],l=a+u[2];else{x.beginPath(),x.moveTo(u[0]*s-l*f,u[1]);for(let t=2;t<u.length;t+=2)x.lineTo(u[t]*s-l*f,u[t+1]);i&&x.fill(),x.stroke()}}x.setTransform(h)}function M(t,e,n,a="#fff",o=30,r="left"){x.fillStyle=a,x.textAlign=r,x.font=`bold ${o}px arial`,x.fillText(t,e,n)}var m=b.width,w=b.height,s0=(b.width=64,b.height=64,x.fillStyle="rgba(0,0,0,0)",x.fillRect(0,0,64,64),h0(q,32,48,0,0,0),document.querySelector("link[rel~='icon']").href=b.toDataURL(),b.width=m,b.height=w,x.textBaseline="middle",x.lineJoin="round",x.lineCap="round",0),i=[],a={},h=[],T=0;function V(t){let e=Math.min(.001*(t-T),.018);x.clearRect(0,0,b.width,b.height);var n=x.getTransform();let a=f0(s0)[0],o=a.getX(),r=a.getY();a.set(x),h.length=0,i.map(t=>{t.update?.(e)&&h.push(t)}),h.length&&p(h),i.map(t=>{t.inView(o,r)&&t.render?.(x)}),requestAnimationFrame(V),T=t,x.setTransform(n)}function y(e){e.inView||(e.inView=()=>1),i.push(e),i.sort((t,e)=>(t.order||0)-(e.order||0)),e.tags?.map(t=>{a[t]=a[t]??[],a[t].push(e)}),e.enable?.()}function R(t,e){return t.filter(t=>!e.includes(t))}function p(t){i=R(i,t),t.map(e=>{e.tags?.map(t=>{a[t]=R(a[t],[e])}),e.disable?.()})}function f0(t){return a[t]||[]}function E(t,e,n){return Math.max(Math.min(t,n),e)}function l0(t){return JSON.parse(JSON.stringify(t))}function A(t,e,n,a){return!(n+1e3<t||a+700<e||t<n-1e3||e<a-700)}var e=[0,0,!1,!1,!1,!1];function u0(t,n){let a=n.x,o=n.y,r=!1,i=!1,h=!1,s=!1;return t.map(({physics:e})=>{if(n.isTouching(e)){let t=!1;o+n.oy+10<e.y+e.h&&o+n.oy+n.h-10>e.y&&(a-10<e.x&&(a=e.x+e.ox-n.ox-n.w+.1,i=!0,t=!0),a+10>e.x+e.w&&(a=e.x+e.ox+e.w-n.ox-.1,h=!0,t=!0)),t||(o-45<e.y&&(o=e.y+e.oy-n.oy-n.h+.1,r=!0),o+n.oy+n.h/2>e.y+e.h&&(o=e.y+e.oy+e.h-n.oy+.1,s=!0)),n.x=a,n.y=o}}),e[0]=a,e[1]=o,e[2]=r,e[3]=i,e[4]=h,e[5]=s,e}var S=[!1,!1];function K(t,e,a=1,o=0){let r=!1,i=!1,h=e.x,s=e.y;return t.map(({physics:t})=>{var e=h+40*a-4*o,n=s+4*a+40*o;t.containPt(e,n)&&(r=!0),e=h-40*a-4*o,n=s+4*a-40*o,t.containPt(e,n)&&(i=!0)}),e.x=h,e.y=s,S[0]=r,S[1]=i,S}var s=0,c0=3,f=3,N=0,d0=0,M0=1,G=10,U=function(){let a=0,o="The Styx",r=4,i=l0(q),h=l0(g);function t(t){o=d[t],r=4}return{update:function(t){a+=t,r-=t},render:function(t){var e=t.getTransform(),n=(t.setTransform(1,0,0,1,0,0),t.scale(.8,.8),c0);for(let t=0;t<f;t++)t>=n?(i[0][0]="#555",i[3][0]="#555"):(i[0][0]="#e22",i[3][0]="#fff"),h0(i,50+55*t,72,0,0,0);h0(h,50,103,0,a,0),M(s,70,105,"#fff",30),0<r&&(t.globalAlpha=E(r,0,1)*E(4-r,0,1),t.lineWidth=6,i0("#000","#fff"),M(o,40,1.15*b.height,"#fff",100),t.strokeText(o,40,1.15*b.height),t.globalAlpha=1),t.setTransform(e)},enable:function(){a0(11,t)},disable:function(){o0(11,t)},order:1e4}};function W(t,e,n,a){return t<n+a&&n<t+e}function Y(t,e){return W(t.x+t.ox,t.w,e.x+e.ox,e.w)&&W(t.y+t.oy,t.h,e.y+e.oy,e.h)}function p0(t,e,n,a,o,r){let i={set:(t,e,n,a,o,r)=>{i.x=t,i.y=e,i.ox=n,i.oy=a,i.w=o,i.h=r},isTouching:t=>Y(i,t),containPt:(t,e)=>{return n=i,e=e,(t=t)>n.x+n.ox&&t<n.x+n.ox+n.w&&e>n.y+n.oy&&e<n.y+n.oy+n.h;var n}};return i.set(t,e,n,a,o,r),i}var Z=function(n,a,t,e,o,r,i){let h=(t-n)*r,s=(e-a)*r,f=(t=new p0(n=(n-.5)*r,a=(a-.5)*r,0,0,h,s),[[i[0],5,0]]),l=[],u=6*Math.random()+6;for(let t=0;t<h;t+=u)l.push(t,6*Math.random()),l.push(Math.min(h,t+u),2*-Math.random()),u=6*Math.random()+6;return f.push(l),f.push(...o[0]),f.push([h,s,0,s]),f.push(...o[1]),{render:function(t){t.fillStyle=i[1],t.fillRect(n-1,a,2+h,s),h0(f,n,a,0,0,0)},inView:function(t,e){return!(t+900<n||e+600<a||n+h<t-900||a+s<e-600)},tags:[3],physics:t,order:-5e3}},k=function(o,r,i,e){let h=0,n=i;return{update:function(t){if(h+=5*t,e-=t,i=Math.min(n*h*2,n),e<.5&&(i=n*e*2,h+=3*t),e<0)return!0},render:function(e){e.fillStyle="#f93";for(let t=0;t<6;t++){var n=(t+h)%6/6,a=i*E(10*n/(1+n*n*15)*(1-n),0,1);e.beginPath(),e.arc(o+Math.cos(4*t)*i,r-40*n*i,10*a,0,6.28),e.fill()}e.fillStyle="#f53",e.beginPath(),e.arc(o+Math.cos(13*h)*i/2,r-4*i,5*i*(1+.1*Math.cos(11*h)),0,6.28),e.fill()},inView:(t,e)=>A(o,r,t,e),order:-4500}},F=function(n,a,t){let o=!1,r=0,i=.1*Math.cos(n*n*18+291*a),h=[],s=1,f=.5<Math.random()?1:-1,l=(0==t&&h.push([["#445",8,0],[0,15,0,0,-7,-7,7,-7,0,0]],[["#445",8,0],[0,50,0,15]]),1==t&&(h.push([["#ccc",7,0],[-17,50,-23,14]],[["#ccc",7,0],[-6,50,-11,3]],[["#ccc",7,0],[5,50,6,-9]],[["#ccc",7,0],[15,50,19,3]]),s=.5*Math.random()+.6),2==t&&(h.push([["#5a5",6,0],[-5,50,-7,20,-10,10]]),h.push([["#5a5",6,0],[-10,10,-20,5,-30,15,-35,25,-25,30]]),h.push([["#5a5",6,0],[5,50,7,30,10,20]]),h.push([["#5a5",6,0],[10,20,20,15,25,25,30,35,20,40]]),s=.5*Math.random()+.7),3==t&&(h.push([["#bb8",6,0],[0,50,0,10],[-10,15,10,15],[-16,40,16,40]]),h.push([["#bb8",6,0],[0,10,0,-20],[-20,-50,0,-20,20,-50],[-13,-10,13,-10]]),s=.5*Math.random()+.6),[0,0,0,0]),u=[0,0,0,0],c=[0,0,0,0],d=null,M=new p0(n,a,-10,-20,20,70);function e([t,,e,n]){n||o||!M.isTouching(t)||(r0(M0,[e]),o=!0,h.map((t,e)=>{l[e]=250*(Math.random()-.5),u[e]=200*-Math.random()-500,c[e]=(4*Math.random()+2)*(.5<Math.random()?1:-1)}),d&&p([d]))}return{update:function(t){if(o&&.7<(r+=t))return!0},render:function(t){var e=t.getTransform();J(s*f,n,a+50,s),t.globalAlpha=1-r/.7,h.map((t,e)=>{h0(t,n+l[e]*r,a+u[e]*r+r*r*1200,0,0,i+c[e]*r)}),t.globalAlpha=1,t.setTransform(e)},enable:function(){0==t&&((d=new k(n,a-7,1,1/0)).order=-6500,y(d)),a0(d0,e)},disable:function(){d&&p([d]),o0(d0,e)},inView:(t,e)=>A(n,a,t,e),order:-6e3}},m0={};function C(N,U){let J=0,A=0,K=0,l=0,W=1,u=1,Y=0,Z=0,k=0,c=0,F=0,d=new p0(N,U,-14,-55,28,50),E=0,G=!1,C=!1,M=0,p=0,m=0,X=0,I=2,H=2,g=1,b=!1,T=0,L=1,P=!1,w=!1,V=!1,R=0,z=!1,x=0,j=0,$=0,y=0,S=0,v=0,D=l0(q),O=(D[1].pop(),D[1].pop(),D[1].shift(),D[1].shift(),D[1][0]=10,D[1][1]=-16,D[1][6]=-10,D[1][7]=-16,D.unshift([10,-16,11,-27]),D.unshift([-10,-16,-11,-27]),D.unshift(["#caa",6,0]),[["#e22",9,0],[0,-37,0,-17],[0,-17,7,0],[0,-17,-7,0]]),B=[["#e22",9,0],[4,0,14,6],["#e66",2,0],[18,5,22,8],[15,9,19,13]],Q=[["#e22",9,0],[0,-17,-16,-6,-26,-6,-32,-15,-34,-22]],t0=[["#ee2",6,0],[0,0,-5,-5,0,-17,5,-5],["#e62",6,0],[0,0,0,-9]],e0=[["#e22",3,0]],n0="rgba(230,100,70,0.5)";function t(t){0==t&&(V=!0,D=l0(q)),1==t&&(G=!0,B.pop(),B.pop(),B.pop(),B.push(["#def",3,0],[18,5,25,8],[15,9,22,13])),2==t&&(z=!0),3==t&&(S=1,e0.push([0,0,-20,-10,-50,-5,-55,15,-25,6,-40,-5,-25,6,-20,-10,-25,6,0,4]))}function e([,t]){t&&(K=300*-t)}return{update:function(i){if(!C){J+=i,g=Math.min(g+i,1),I=Math.min(I+2*i,1),H=Math.min(H+2*i,1),R+=i,L+=i;var h=(m0.ArrowLeft?-1:0)+(m0.ArrowRight?1:0);let t=(m0.ArrowUp?1:0)+(m0.ArrowDown?-1:0);var s=Date.now()-m0.KeyX<100,f=Date.now()-m0.KeyV<100;Date.now()-m0.KeyC<100&&w&&V&&3!=v&&.85<L&&(L=0,P=!0,g=0,w=!1,K=1e3*u,r0(5)),3==v&&Math.abs(t)<.3&&.3<Math.abs(h)&&Math.sign(h)==Math.sign(W)&&(t=1);let e,n,a,o,r=([N,U,e,n,a,o]=u0(f0(3),d),n&&0<W||a&&W<0);r&&0<=p&&(r=!1),e&&(l=0,c=.15,x=0,e=!0,w=!0),o&&(l=0),3!=v?(P||(.3<Math.abs(h)?(.2<g&&(K+=3e3*Math.sign(h)*i*Math.pow(1-Z,6),J+=2*i,Y+=4*(1-Y)*i),u=Math.sign(h),e&&.13<(M+=i)&&(r0(3),M=-Math.random()/40)):Y+=4*(0-Y)*i,(Math.sign(h)!=Math.sign(K)||g<.2)&&(K-=14*K*i)),s&&.18<g&&T<3&&(b?I=0:H=0,T+=1,b=!b,g=0,X=1,K=850*u,l=.25*l-100,r0(d0,[new p0(N,U,50*u-50,-50,100,50),u])),.4<g&&(T=0),f&&1<R&&z&&(R=0,g=0,X=1,K=850*-u,l=.25*l-100,r0(7,[N,U-30,u]))):(x=0,.3<Math.abs(t)?(h=Math.min(6*m,1),U-=370*Math.sign(t)*i*h,A+=18*i*t*h,.13<(M+=i)&&(r0(3),M=-Math.random()/40)):(J+=i,A-=15*Math.sin(A)*i)),Date.now()-m0.KeyZ<100&&.15<y&&(3!=v?0<c?(l=-1e3,y=0,c=0,P=!1,r0(4)):x<S&&(x+=1,j=1,l=-1e3,y=0,c=0,P=!1,w=!0,L=1,r0(6)):(l=-1e3,K=300*-W,p=.1,v=0,x=0,c=0,y=0,r=!1,r0(4))),r?e&&3==v?v=0:(r&&!e&&(.3<g||P)&&G||r&&e&&.3<t&&G)&&(v=3,P=!1,g=1,K=0):(3==v&&(.3<t||l<-.3)&&(l=-518,K=300*W,p=.1),v=0),3==v?(w=!0,0<=l?(l-=20*l*i,A+=l/10*i):(l-=10*l*i,A+=-l/10*i)):(g<.2?l+=1e3*i:(c<=.1||l<0)&&(!m0.KeyZ&&l<0?l+=6e3*i:l+=2e3*i),m=0),f0(2).map(({enemyHitbox:t})=>{C||L<.3||d.isTouching(t)&&E<=0&&.15<g&&(E=1,g=0,K=1100*Math.sign(N-t.x-t.w/2),l=-100,3==v&&(v=0,K=300*-u),r0(2,1),c0<=0&&(d.ox=-1e3,r0(19,[N,U-30,1,2]),r0(19,[N,U-30,8,1]),C=!0,setTimeout(()=>r0(20),1500)))}),P&&(L<.27?(K=4800*u*(.33-L),l=0):P=!1),W+=15*(u-W)*i,E<=.7&&(P||(K=Math.max(Math.min(K,400),-400))),l=Math.min(l,800),k+=17*(l-k)*i,F+=17*((0<c?1:0)-F)*i,Z+=((3==v?1:0)-Z)*(3==v?17:8)*i,X+=17*((g<.35?1:0)-X)*i,$+=17*(j-$)*i;d.x=N,d.y=U;for(let t=0;t<3;t++)d.x+=i*K/3,d.y+=i*l/3,[N,U,_,_,_,o]=u0(f0(3),d),o&&(l=0),C||d.set(N,U,-14,-55,28,50);c-=i,p-=i,m+=i,j=Math.max(j-(3==v?3*i:i),0),y+=i,E=Math.max(0,E-i)}},render:function(t){var e,n,a,o,r,i,h,s,f,l,u,c,d,M,p,m,g,b,w,x,y,v,T,V,R,S,q;C||(e=Math.sign(K)*Math.pow(Math.abs(K/400),.5),a=1-(n=X),r=1-(o=Z),h=1-(i=(1-F)*r),f=(1-(s=Y*r*a))*r,u=1-(l=$),V=(c=1-Math.exp(6*-I))-Math.pow(I/1.5,2),R=(q=1-Math.exp(6*-H))-Math.pow(H/1.5,2),d=6*J,M=(.7*-W+.2*Math.cos(2*J))*f+(-.6*e+.1*Math.cos(.5*d))*s+-.6*W*o,p=5*e+Math.min(5*Math.cos(1.5*A),0)*W*o+(0<W?15+35*V-40*V*V:-15*V)*n,m=-37*f*a+(-31-e)*s*a+(2*Math.sin(1.5*A)-39)*o+(0<W?10*V-40:-28)*n,g=-.5*s+-1.2*k/800*r*a+(.9-2*W)*o+(0<W?2.8*V-1.2:4*V-.9)*n,b=4*e*a+Math.min(5*Math.cos(1.5*A+3),0)*W*o+(0<W?15*R-3:-15-35*R+40*R*R)*n,w=-37*f*a+(e-31)*s*a+(-37-2*W+2*Math.sin(1.5*A+3))*o+(0<W?-28:10*R-40)*n,x=.5*s*a+1.2*k/800*r+(-1.5*W-1)*o+(0<W?.9-4*R:1.6-2.9*R)*n,y=10*(e*r*a+n*W)+W*o*6,v=-37*f*a+-23*(s*a+n)+-43*o,T=.3*M+.2*e+W*k/2e3*r+1.1*-W*o+(P?4*(.3-L)*W:0),V=M+(.15*Math.sin(1.2*A)-.2)*o+(.5*V-.5*R)*n,R=t.getTransform(),S=0<W?c:q,q=0<W?q:c,i0(G?"#3af":"#999"),t.translate(N,U),W<0&&t.scale(-1,1),S<.95&&(t.lineWidth=G?4:2,t.beginPath(),t.ellipse(5,-25,86,20,.1,4*S-2.5,.5+S),t.stroke(),t.beginPath(),t.ellipse(5,-25,76,30,-.2,4*S-2.5,.5+S),t.stroke()),t.setTransform(R),O[1][0]=10*e*a-7*o*W+15*n*W,O[1][1]=-37*f*a-23*(s*a+n)-35*o,O[2][2]=(7*f+(7*Math.cos(d)-4)*e)*h*r+(5+k/50)*i*W*r+(14*W+Math.min(7*Math.sin(-A),0))*o,O[2][3]=Math.min(7*Math.sin(d),0)*s*h*r+(-4-k/70)*i*r+(9*Math.cos(A)*W-8)*o,O[3][2]=(-7*f+(7*Math.cos(3.2+d)-4)*e)*h*r+(k/50-6)*i*W*r+(14*W+Math.min(7*Math.sin(3-A),0))*o,O[3][3]=Math.min(7*Math.sin(3.2+d),0)*s*h*r+(2-k/70)*i*r+(9*Math.cos(A+3)*W-8)*o,Q[1][3]=+Math.cos(d)+31-37-k/50,Q[1][5]=+Math.cos(1+d)+31-37-k/40,Q[1][6]=-32-Math.abs(k/290),Q[1][7]=2*Math.cos(2+d)+22-37-k/30,Q[1][8]=k/70-34,Q[1][9]=+Math.cos(3+d)+15-37-k/20,.1<E&&(t.globalAlpha=0<Math.cos(50*E)?.2:1),h0(Q,N,U-8,0,1.57+M+.3*M,0),z&&h0(t0,N,U+Q[1][9]-8,Q[1][8],M+.3*M,.3*-e+.1*Math.cos(U/14)),0<W?h0(B,N+p,U+m-1.5*Math.cos(3+d)+1,0,M,g):h0(B,N+b,U+w-1.5*Math.cos(3+d)+1,0,3.14+M,x),t.fillStyle,h0(e0,N-2,U-37+6*n,0,0*l+(.4*M+1.4)*u,-.7*u+k/2e3-l*l*4+2.8*j,n0),h0(e0,N+2,U-37+6*n,0,3.14*l+(.4*M+1.6)*u,.7*u+k/2e3+l*l*4.4-2.8*j,n0),h0(O,N,U-8,0,M,0),h0(D,N+y,U+v+1.5*Math.cos(1+d)+1,10,V,T),0<W?h0(B,N+b,U+w-1.5*Math.cos(3+d)+1,0,3.14+M,x):h0(B,N+p,U+m-1.5*Math.cos(3+d)+1,0,M,g),t.globalAlpha=1,i0(G?"#3af":"#999"),t.translate(N,U),W<0&&t.scale(-1,1),q<.95&&(t.lineWidth=G?4:2,t.beginPath(),t.ellipse(5,-25,86,20,.2,-q,3-4*q),t.stroke(),t.beginPath(),t.ellipse(5,-25,76,30,.1,-q,3-4*q),t.stroke()),L<.24&&(t.translate(-120,0),i0("#eee"),t.lineWidth=4,t.beginPath(),t.ellipse(5,-36,80,10,-.1,1-8*L,3-15*L),t.stroke(),t.beginPath(),t.ellipse(5,-36,70,5,.1,1-8*L,3-15*L),t.stroke()),t.setTransform(R))},enable:function(){a0(14,t),a0(M0,e)},disable:function(){o0(14,t),o0(M0,e)},order:1e3,tags:[1],playerHitbox:d,grant:t,reset:function(t,e){C=!1,d.x=t,d.y=e,K=0,l=0,f0(s0)[0].aim(t,e,1,!0)}}}function X(l,u,t){let c=10*Math.random(),r=0,i=0,h=127<t?-1:1,d=h,M=0,s=3,f=new p0(l,u,0,0,0,0),p=[["#fff",5,0],[0,-13,4,-29,13,-40],[0,-16,-2,-17],[2,-22,-3,-24],[4,-28,0,-30],[6,-33,4,-35]],m=[["#fff",5,0],[-8,0,0,-13,8,0]],g=[["#fff",5,0],[0,0,14,15]],b=[["#fff",9,0],[3,10,-3,10,-3,0,-6,-4,0,-10,6,-4,3,0,3,10],["#000",4,5],[-5,-6,-3,-5],[5,-6,3,-5]];function e([t,e,n,a]){f.isTouching(t)&&0<s&&(r=600*e,h=-Math.sign(e),M=1,(s-=a?2:1)<=0&&r0(19,[l,u-55,4,1]),r0(M0,[n]))}return{update:function(t){if(s<=0)return!0;var e,n,a,o;i+=1400*t,[l,u,e,n,a,o]=u0(f0(3),f),[hasRight,hasLeft]=K(f0(3),f,.5),e&&500<i&&(s=0,r0(19,[l,u-55,4,1])),(n||!hasRight&&e)&&(h=-1),(a||!hasLeft&&e)&&(h=1),(e||o)&&(i=0),M<=0&&e&&(r=60*d),0<M&&(r-=12*r*t),c+=t,l+=r*t,u+=i*t,d+=8*(h-d)*t,M=Math.max(0,M-2*t),f.set(l,u,-20,-59,40,60)},render:function(t){var e=.6*d,n=6*c,a=t.getTransform(),o=(J(1.3,l,u),Math.cos(n)/20*1-d*M*.3),r=7*e*1+50*o,i=0*(-33-2*e+Math.cos(n))+ +(-33-2*e+Math.cos(n-1)),h=7*e*1+50*o,s=0*(2*e-33+Math.cos(n))+ +(2*e-33+Math.cos(2+n)),f=+(-40+Math.cos(1+n));m[1][0]=8*Math.cos(n)*d*1,m[1][1]=4*Math.min(0,Math.sin(n))*1,m[1][4]=8*Math.cos(3+n)*d*1,m[1][5]=4*Math.min(0,Math.sin(3+n))*1,.2<M&&(t.globalAlpha=0<Math.cos(25*M)?.2:1),h0(m,l,u,0,e,0),h0(g,l+r,u+i,-4,2.1*e,-e/3),h0(g,l+h,u+s,4,2.1*e+3.14,-e/3),h0(p,l,u,0,2*e-1.57,o),h0(b,l,u+f,23+70*o*d,-e,-M*d*.6),t.globalAlpha=1,t.setTransform(a)},enable:function(){a0(d0,e)},disable:function(){o0(d0,e)},inView:(t,e)=>A(l,u,t,e),order:500,tags:[2],enemyHitbox:f}}window.onkeydown=t=>{m0[t.code]||(m0[t.code]=Date.now()),r0(17)},window.onkeyup=t=>{delete m0[t.code]};var I=[0,3.1,4.7,1.5];function t(u,c,t){let d=10*Math.random(),r=0,i=0,h=127<t?-1:1,s=t%4,M=h,p=0,f=4,m=0,g=0,b=!1,l=3*Math.random(),w=[-50,0,-50,-59].map(t=>1.1*t/1.3),x=[-59,-50,0,-50].map(t=>1.1*t/1.3),y=[100,60,100,60].map(t=>1.1*t/1.3),v=[60,100,60,100].map(t=>1.1*t/1.3),T=6.28*s/4,V=Math.cos(T),R=Math.sin(T),S=(u-=50*R,c+=50*V,new p0(u,c,0,0,0,0)),e=[];for(let t=0;t<21;t++)e.push(24*Math.cos(t/20*6.28),17*Math.sin(t/20*6.28));let q=[["#fff",5,0],e],N=[["#000",4,0],[-7,-6,-3,-5],[7,-6,3,-5],["#000",4,3],[-7,0,-3,1],[7,0,3,1],["#000",4,4],[-7,6,-3,7],[7,6,3,7]],U=[["#fff",5,10],[6,0,0,0,0,0,0,0],[-6,0,0,0,0,0,0,0],["#fff",5,-10],[6,0,0,0,0,0,0,0],[-6,0,0,0,0,0,0,0]];function n([t,e,n,a]){S.isTouching(t)&&0<f&&(p<=0&&(r=300*e*Math.abs(V)+200*R,i-=200*V),m<=0&&g<=0&&(h=-e),p=1,(f-=a?2:1)<=0&&r0(19,[u+S.ox+S.w/2,c+S.oy+S.h/2,7,1]),r0(M0,[n,a?0:e]))}return{update:function(t){if(f<=0)return!0;var e,n,a,o;r-=1300*R*t,i+=1300*V*t,[u,c,e,n,a,o]=u0(f0(3),S),[hasRight,hasLeft]=K(f0(3),S,1.3*V*1.1,1.3*R*1.1),0==s&&(!n&&hasRight||(h=-1),!a&&hasLeft||(h=1),e&&0<i&&(i=0)),1==s&&(!e&&hasRight||(h=-1),!o&&hasLeft||(h=1),a&&r<0&&(r=0)),2==s&&(!n&&hasLeft||(h=1),!a&&hasRight||(h=-1),o&&i<0&&(i=0)),3==s&&(!e&&hasLeft||(h=1),!o&&hasRight||(h=-1),n&&0<r&&(r=0)),l<0&&(g=.5,r=0,i=0,b=!0,l=2*Math.random()+1.5),g<=0&&b&&(m=.6,b=!1),0<m&&(s%2==0?r=(800*m+100)*M*V:i=(800*m+100)*M*R),g<=0&&(p<=0?m<=0&&(s%2==0?r=50*M*V:i=50*M*R):s%2==0?r-=12*r*t:i-=12*i*t),d+=0<g?2*-t:t*(1+2*m),u+=r*t,c+=i*t,M+=8*(h-M)*t,p=Math.max(0,p-2*t),m=Math.max(0,m-t),g=Math.max(0,g-t),l-=t,S.set(u,c,w[s],x[s],y[s],v[s])},render:function(t){var e=.6*M,n=11*d,a=t.getTransform(),o=(J(1.1,u,c),32+Math.cos(n)),r=b?(40*g*g-10)*M:0,i=Math.cos(n/2)/15*1+T+m*M;for(let t=0;t<4;t++){var h=t%2?1:-1,s=I[t],f=t<2?-3:7,l=t<2?1+t:2+t;U[l][2]=11*h-4*Math.cos(n+s)*M*1,U[l][3]=12,U[l][4]=(40+f)*h-2*Math.cos(n+s)*M*1,U[l][5]=4*Math.cos(n+s)*1-5,U[l][6]=(44+f)*h-9*Math.cos(n+s)*M*1,U[l][7]=+Math.min(10*-Math.sin(n+s),0)+20}.2<p&&(t.globalAlpha=0<Math.cos(25*p)?.2:1),h0(U,u+21*R,c-21*V,0,1.4*-e,T),h0(q,u+o*R+r*V,c-o*V+r*R,0,e/2,e/2+i,"#fff"),h0(N,u+o*R+r*V,c-o*V+r*R,17,-e,-e/2+i,"#fff"),t.globalAlpha=1,t.setTransform(a)},enable:function(){a0(d0,n)},disable:function(){o0(d0,n)},inView:(t,e)=>A(u,c,t,e),order:500,tags:[2],enemyHitbox:S}}var H=[7,14,11],L=[1,3,7],P=["#a63","#889","#db1"],j=["#742","#667","#b90"];function D(o,r,i){let h=0,s=0,n=3*i,a=new p0(o-25,(r+=50)-55,0,0,50,55);var t=P[i-1];let f=j[i-1],l=[[t,8,0],[20,0,-20,0,-28,-23,28,-23,20,0],[t,8,0],[-28,-23,-24,-40,24,-40,28,-23],["#ffa",8,0],[0,-27,0,-19]];function e([t,,e]){a.isTouching(t)&&(h=1,s=7*Math.random(),--n,r0(19,[o,r-20,1,1]),r0(M0,[e]))}return{update:function(t){if(n<=0)return r0(19,[o,r-20,H[i-1],1]),r0(19,[o,r-20,L[i-1],2]),!0;h=Math.max(h-t,0)},render:function(t){var e=Math.exp(6*h-3),n=2+Math.abs(12*Math.cos(20*h))*e/10,e=Math.cos(30*h+s)*h*e/60,a=t.getTransform();J(.75+.15*i,o,r),h0(l,o,r-n,0,0,e,f),t.setTransform(a)},enable:function(){a0(d0,e)},disable:function(){o0(d0,e)},inView:(t,e)=>A(o,r,t,e),order:-6e3}}var O=[["#f52",6,0]];for(let t=-50;t<50;t+=26)O.push([t,50,t+10,25,t+10,140,t+10,25,t+20,50]);var B=[["#f82",40,0],[-47,50,47,50]],Q=[-45,-125,-45,35],z=[35,-45,-125,-45];function o(r,i,h){let s,f=0,l=Math.random(),a=Math.random()+.5,u=80*(Math.random()-.5),o=0,c=h<4?1:0;var t=h%4;return{update:function(t){1<(l+=t*a)&&(a=2*Math.random()+.5,l=0,u=80*(Math.random()-.5));var e=(Date.now()+1500*c)%3e3;let n=0;4<=h&&h<=7&&0==(o=1500<e?1:0)&&500<e&&(n=Math.cos(e/20)/20),f+=15*(o+n-f)*t},render:function(t){var e,n=1.57*h,a=Math.sin(n)*f*91,o=-Math.cos(n)*f*91;8==h?(t.fillStyle="#f82",t.beginPath(),e=l,t.arc(r+u,i+50-40*e,40*(e-e*e),0,2*Math.PI),t.fill(),h0(B,r,i,0,0,0)):h0(O,r+a,i+o,0,0,n),s.x=r+a,s.y=i+o},inView:(t,e)=>A(r,i,t,e),order:-6e3,tags:[2],enemyHitbox:s=new p0(r,i,Q[t],z[t],90,90)}}function r(n,a,o){let r=!1,e=50,i=[["#fff",8,0],[0,0,0,-200],[-50,-190,50,-190],[-50,-20,50,-20]],h=([-1,1].map(t=>{i.push([20*t,0,25*t,-200],[40*t,0,43*t,-230,40*t,-260,30*t,-260,25*t,-250,33*t,-245])}),new p0(n-50,a-220,0,0,100,220));function t([t,e]){t==o&&(r=e)}return{update:function(t){e+=((r?-150:50)-e)*t,h.y=a+e-220},render:function(t){h0(i,n,a+e,0,0,0)},enable:function(){a0(G,t)},disable:function(){o0(G,t)},inView:(t,e)=>A(n,a,t,e),tags:[3],physics:h,order:-7e3}}function $(n,a,o,t=0){let r=!1,i=1==t,h=0,s=new p0(n-40,a-15,0,0,80,65),f=[["#a53",8,0],[0,0,0,-60,-5,-68,0,-76,5,-68,0,-60]],e=[["#a53",8,0],[-30,50,-16,28,16,28,30,50],[-18,50,-10,38,10,38,18,50]];function l([t,,e]){s.isTouching(t)&&!r&&(r=!0,r0(G,[o,r]),r0(M0,[e]),s.x=-1e3)}return{update:function(t){var e=r^i?1:-1;h+=10*(.7*e-h)*t,f[0][0]=r?"#5af":"#a53"},render:function(t){h0(f,n,a+50,0,0,h),h0(e,n,a,0,0,0)},enable:function(){a0(d0,l)},disable:function(){o0(d0,l)},inView:(t,e)=>A(n,a,t,e),order:-6e3}}function l(t,e,n){return $(t,e,n,1)}function u(o,r,i){let h=0,s=0,f=!1,l=0,u=!1,a=[["#777",5,0],[200,60,-200,60,-200,0,-100,0,-100,-50,100,-50,100,0,200,0,200,60]],c=[["#911",10,0],[-100,-40,-100,-50,100,-50,100,-25],[-70,-50,-70,-25],[40,-50,40,-15],[60,-50,60,-35]],d=[["#fff",6,0]],e=[],n=[],M=1.256;for(let t=0;t<6;t++)e.push(100*Math.sin(t*M),100*-Math.cos(t*M)),n.push(100*Math.sin(t*M*2),100*-Math.cos(t*M*2));d.push(e,n);let p=l0(v),m=x.createLinearGradient(o,r-50,o,r-250);m.addColorStop(0,"rgba(255,255,110,0.5)"),m.addColorStop(.3,"rgba(255,255,110,0.2)"),m.addColorStop(1,"rgba(255,255,110,0.0)");var t=new p0(o-200,r,0,0,400,50),g=new p0(o-100,r-50,0,0,200,50);let b=new p0(o-75,r-60,0,0,150,10),w={tags:[3],physics:g};return{update:function(e){if(h+=e,f)s=3,l+=e;else if(Y(b,f0(1)[0].playerHitbox)){u||(r0(12),u=!0),s+=e;let t=f0(s0)[0];var n=s/3,a=1-n;if(t.aim(t.getX()*a+o*n,t.getY()*a+(r-100)*n,1+.4*Math.sqrt(s)*n,n),3<s){f=!0,d[0][0]="#ee2",p.map(t=>{t[0][0]="#ee2"});for(let t=0;t<20;t++)r0(19,[o+150*(Math.random()-.5),r-100,1,1]);r0(14,i),l=0}}else s-=2*s*e,u&&(r0(13),u=!1)},render:function(t){var e=5*Math.sin(2*h)-200;h0(a,o,r,0,0,0,"#777"),f?(d[0][1]=4,t.fillStyle=m,t.fillRect(o-100,r-250,200,200)):(t.globalAlpha=.5*Math.cos(s*s*10)+.5,d[0][1]=6*(1-s/3)),h0(d,o,r+e,0,0,1.256*-s/3),t.globalAlpha=1,h0(c,o,r,0,0,0);for(let t=0;t<5;t++){var n=3*Math.cos(.2*t+3*h)+130;h0(p[i],o+Math.sin(t*M)*n,r+e-Math.cos(t*M)*n,0,0,s*s*7*(t%2-.5))}},enable:function(){y(w)},disable:function(){remove(w)},inView:(t,e)=>A(o,r-100,t,e),tags:[3],physics:t,order:-8e3}}function c(o,r,i){let h=0,s=0,f=!1,l=!1,e=[["#777",5,0],[100,60,-100,60,-100,0,100,0,100,60]],n=[["#911",10,0],[-100,10,-100,0,100,0,100,25],[30,0,30,25],[-70,0,-70,35],[60,0,60,15]],a=l0(q),u=(a[0][0]="#ee2",a.splice(3,3),l0(v)),c=x.createLinearGradient(o,r,o,r-200);c.addColorStop(0,"rgba(255,255,110,0.3)"),c.addColorStop(.3,"rgba(255,255,110,0.1)"),c.addColorStop(1,"rgba(255,255,110,0.0)");var t=new p0(o-100,r,0,0,200,50);let d=new p0(o-75,r-10,0,0,150,10);function M(){i==N&&f0(1)[0].reset(o,r-150)}return{update:function(e){if(f=N==i,h+=e,f)s=3;else if(Y(d,f0(1)[0].playerHitbox)){l||(r0(12),l=!0),s+=e;let t=f0(s0)[0];var n=s/3,a=1-n;t.aim(t.getX()*a+o*n,t.getY()*a+(r-100)*n,1+.4*Math.sqrt(s)*n,n),3<s&&r0(15,[i])}else l&&(r0(13),l=!1),s-=3*s*e},render:function(t){u.map(t=>{t[0][0]=f?"#ee2":"#4af"}),h0(e,o,r,0,0,0,"#777"),f?(t.fillStyle=c,t.fillRect(o-50,r-200,100,200),h0(a,o,r-50+4*Math.cos(5*h),0,h,0)):t.globalAlpha=.5*Math.cos(s*s*15)+.5;for(let t=0;t<5;t++)h0(u[t],o-40*(t-1.9),r+25,0,0,0);t.globalAlpha=1,h0(n,o,r,0,0,0)},enable:function(){a0(20,M)},disable:function(){o0(20,M)},inView:(t,e)=>A(o,r,t,e),tags:[3],physics:t,order:-8e3}}var t0=[0,0,["#b72","#741",1,2,7,7,5,3,[3,3,1,2,0],3],0,function(a,o){o-=50;let r=!1,i=0,e=0,h=0,s=0,f=0,l=[["#fff",4,0]],u=[],c=[];for(let e=0;e<8;e++){let t=(Math.random()-.5)/4-2.3+e%4/2;3<e&&(t+=3.14);var n=110/Math.abs(Math.sin(t));u.push(t),c.push(n),l.push([0,0,Math.cos(t)*n,Math.sin(t)*n])}let d=[],M=(l.push(d),new p0(a-50,o-100,0,0,100,200));function p(){for(let t=0;t<8;t++)l[1+t][0]=h,l[1+t][1]=s;for(let t=0;t<32;t++){var e=u[t%8],n=(t/70+.07)/(1-.5*Math.abs(Math.sin(e))),a=c[t%8]*n;d[2*t]=Math.cos(e)*a+h*(1-n),d[2*t+1]=Math.sin(e)*a+s*(1-n)}}function t([t,,e,n]){if(M.isTouching(t)){if(f=10,n&&!r){r=!0;for(let t=0;t<18;t++)setTimeout(()=>{r0(18,[a+170*(Math.random()-.5),o+190*(Math.random()-.5)+20,+Math.random()+1,.5*Math.random()+.5])},Math.random()*(100+33*t));M.h=0}n||r0(16),r0(M0,[e])}}return p(),{update:function(t){if(e+=56*t,f-=5*f*t,h=f*Math.cos(e),s=.8*f*Math.cos(e/1.4),p(),r&&1<(i+=t))return!0},render:function(t){var e,n;r&&(e=1-i,n=Math.max(255-1e3*i,0),l[0][0]=`rgb(${n},${n},${n})`,l[0][1]=4*e),h0(l,a,o,0,0,0)},enable:function(){a0(d0,t)},disable:function(){o0(d0,t)},inView:(t,e)=>A(a,o,t,e),order:-9e3,tags:[3],physics:M}},0,D,2,X,0,D,1,D,3,t,2,o,3,o,1,t,3,["#fc1","#a71",9,9,3,1,1,0,[0],4],0,o,8,X,128,0,0,c,4,u,4,o,0,r,6,u,3,l,6,["#b5c","#535",7,7,4,2,1,2,[1,1,1,3,0],2],0,c,5,t,0,["#a99","#433",5,1,4,9,2,1,[0,0,0,1,3],0],0,["#474","#242",2,3,1,1,5,4,[2,2,2,0],1],0,t,128,o,6,$,1,r,1,u,0,r,4,$,2,r,2,l,4,c,2,r,0,c,1,l,0,c,0,t,1,l,5,C,0,c,3,o,2,r,3,l,3,l,8,r,5,o,4,r,7,r,8,l,7,u,2,u,1],e0=function(){let e=new Image,u=null,c,d,M=100,p={},n=(t0.map((t,e)=>{t[0]&&(p[e]=t)}),0),m={};function g(t,e){t=t+e*c<<2;return u[2+t]}let a=[0,0,0,0,0,0,null];return{generate:async function(){await new Promise(t=>{e.onload=t,e.src="data:image/png;base64,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"});let t=b.getContext("2d");t.drawImage(e,0,0),c=e.width,d=e.height,u=t.getImageData(0,0,c,d).data,t.clearRect(0,0,c,d);for(let n=0;n<c;n++)for(let e=0;e<d;e++){var a=g(n,e);let t=t0[2*a];a=t0[2*a+1];t&&!t[0]&&y(new t(n*M,e*M,a)),m[n]=m[n]||{},m[n][e]=function(n,a){let o=[0,0,0,0,0,0,null],r={},i=.001;for(let e=-4;e<=4;e++)for(let t=-4;t<=4;t++){var h=g(n+e,a+t)<<1,s=p[h];if(s){r[h]=!0;for(let t=0;t<6;t++)o[t]+=s[2+t];i++}}var t=Object.keys(r);o=o.map(t=>10*t/i),1==t.length&&(o[6]=t[0]);return o}(n,e)}let o={};for(let n=0;n<c;n++)for(let e=0;e<d;e++){var r=g(n,e)<<1;if(p[r]&&!o[n+","+e]){let t=e;for(;t<d;){if(r!=g(n,t)<<1)break;o[n+","+t]=!0,t++}o[n+","+e]=[e,t,r]}}let i={};for(let n=0;n<c;n++)for(let e=0;e<d;e++){var h=o[n+","+e];if(h?.length&&!i[n+","+e]){let t=n;for(;t<c;){var s=o[t+","+e];if(!s?.length)break;if(s[1]!=h[1]||s[2]!=h[2])break;i[t+","+e]=!0,t++}var f=function(e,n,a,o){let r=[],i=[],h=[],s=[];for(let t=n;t<o;t++){var f=g(a,t)<<1,f=(h.length||p[f]||h.push((a-e)*M,(t-n)*M),h.length&&p[f]&&(h.push((a-e)*M,(t-n)*M),r.push(h),h=[]),g(e-1,t)<<1);s.length||p[f]||s.push(0,(t-n)*M),s.length&&p[f]&&(s.push(0,(t-n)*M),i.push(s),s=[])}h.length&&(h.push((a-e)*M,(o-n)*M),r.push(h));s.length&&(s.push(0,(o-n)*M),i.push(s));return[r,i]}(n,e,t,h[1]);y(new Z(n,e,t,h[1],f,M,p[h[2]]))}}for(let e=0;e<c;e++)for(let t=1;t<d;t++){var n=p[g(e,t)<<1],l=g(e,t-1);n&&!l&&.5<Math.cos(1321*e+2831*t)&&y(new F(e*M,(t-1)*M,n[8][(13*e+17*t)%n[8].length]))}},tags:[4],getTheme:function(t,e){return(t=m[parseInt(t)]?.[parseInt(e)])&&(a=t)[6]&&n!=t[6]&&(r0(11,p[t[6]][9]),n=t[6]),a}}},n0=function(h,s){let f=f0(1)[0],l=(h=f.playerHitbox.x,s=f.playerHitbox.y,0),u=0,c=h,d=s,M=1,p=M,m=[0,0,0],g=[0,0,0];function t(){u=.5}return a0(2,t),a0(14,t),a0(15,t),{update:function(e){var t,n,a,o;l+=e,u=Math.max(u-e,0),h+=12*(c-h)*e,s+=12*(d-s)*e,p+=3*(M-p)*e,M+=4*(b.width/1500-M)*e,0<c0&&(t=f.playerHitbox.x,n=f.playerHitbox.y,{width:a,height:o}=b,o=o/8,t<h-(a=a/10)&&(c=t+a),h+a<t&&(c=t-a),n<s-o&&(d=n+o),s+.8*o<n&&(d=n-.8*o));let r=f0(4)[0];var i=r.getTheme(h/100,s/100);for(let t=0;t<3;t++)g[t]+=3*(i[t]-g[t])*e,m[t]+=3*(i[t+3]-m[t])*e;document.body.style=`background:linear-gradient(0deg,rgb(${m.join(",")}) 0%,rgb(${g.join(",")}) 100%)`},set:function(t){var e=3*Math.cos(l)+15*Math.cos(40*l)*u,n=3*Math.cos(.8*l)+8*Math.cos(23*l)*u;t.translate(b.width/2,b.height/2),t.scale(p,p),t.translate(e-h,n-s)},aim:function(t,e,n,a){c=t,d=e,M=n*b.width/1500,a&&(h=c,s=d,p=M)},getX:function(){return h},getY:function(){return s},getBgBot:function(){return m},order:-1e4,tags:[s0]}},g0=function(r,i,h,s,f=1){let l=7*Math.random(),a=7*Math.random(),u=0,c=!1,d=0,M=10+3*Math.random(),o=20*Math.random()-15,p=new p0(r,i,1,1),m;return m=1==f?l0(g):[["#fff",9,0],[3,10,-3,10,-3,0,-6,-4,0,-10,6,-4,3,0,3,10],["#000",4,5],[-5,-6,-3,-5],[5,-6,3,-5]],{update:function(t){var e,n,a,o;if(l+=t,d+=t,s+=2e3*t,d>M&&(c=!0),[r,i,e,n,a,o]=u0(f0(3),p),(n||a)&&(h=-h),e&&(200<s?(r0(9),s*=-.4):s=0,h-=9*h*t),o&&(s=0),c?u+=3*t:f0(1).map(({playerHitbox:t})=>{p.isTouching(t)&&.35<d&&(c=!0,r0(8,9*f-8))}),.5<u)return!0;r+=h*t,i+=s*t,p.set(r,i,-15,-20,30,40)},render:function(t){var e=3*l,n=.2*Math.cos(l+a)+a;c?(i0(`rgba(255,255,180,${1-2*u})`),t.beginPath(),t.arc(r,i+o,40*u+10,0,6.28),t.fill()):h0(m,r,i+o,0,e,n)},collectHitbox:p}},b0=function(i,h,s){let f=300*s,l=this,u=0,o=[["#fb1",10,0],[10,0,0,-10,-10,0,-15,-5,-20,0,-28,0,-20,0,-15,5,-10,0,0,10,10,0],["#f82",10,0],[2,0,-4,0]],c=new p0(i+=40*s,h,-20,-15,30,30);function t([t]){t==l&&(l=null)}return{update:function(t){var e,n,a,o,r;return u+=t,!l||9<u||(r0(d0,[c,s,l,!0]),[e,e,n,a,o,r]=u0(f0(3),c),n||a||o||r?(r0(18,[i,h,2,.5]),!0):(f=E(f+1e3*t*s,-750,750),i+=f*t,void(c.x=i)))},render:function(t){i0("#fb1"),t.beginPath();var e=Date.now(),n=e%100/100,a=40*(n-n*n);t.arc(i-(5+42*n)*s,h+4*Math.cos(e/20),a,0,6.28),t.fill(),h0(o,i,h,0,0,1.57*s-1.57)},enable:function(){a0(M0,t)},disable:function(){o0(M0,t)}}},w0=function(){let v=null,T=null,n,t,a,o,r,i,h,s,f,l,u,c,d,M,p,m,g,b,w,V,x,y,R,e,S=!0,q=t=>Math.sin(t),N=t=>(t%6.28-3.14)/6.28,U=t=>E(1e3*Math.sin(t),-1,1),k=(t,e)=>E(Math.sin(t)*e,-1,1);function J(t,e){var t=v.createBuffer(1,T*t,T),n=t.getChannelData(0),a=t.length;for(let t=0;t<a;t++)n[t]=e(44100*t/T)*(1-t/a);return t}function A(n,a){let o=[],t=[];var r=[4,2,.5,3,4][n-1],i=[1,.5,.25,2,2][n-1],h=[-15,-20,-19,-12];t.push([n*n*3*.5%2,n%2],[.5*(n*n*3+9*n)%2,(n+1)%2],[.5*(n*n*2+11*n)%2,(n+1)%2]);for(let e=0;e<3;e++){var s=8*e,f=[0,3,-5][e];for(let t=0;t<8;t++)o.push([h[(7*n+2*e+(t>>1)+t*t*3)%h.length]+f,t+s,6,1]);for(let t=0;t<8/i;t++)(t+t*t+e+3*n)%7<4&&o.push([-3+f+a[(t+t*t*2+e*e*2+n)%a.length],t*i+s,r,2])}return[o,t]}function K([e,n],a){let t=v.createBuffer(1,8*T*3*a,T),o=t.getChannelData(0);for(let t=0;t<e.length;t++){[r,i,h,s]=e[t],g=m=p=M=d=c=u=l=f=void 0;var r,i,h,s,f=o,l=i*a,u=h*a,c=s,d=6*2**(-r/12)*2,M=parseInt(l*T),p=parseInt(u*T);for(let t=0;t<p&&t<f.length;t++){var m=0,g=t/p;m+=1==c?2*k(t/(2*d)+q(t/8e3),44*Math.exp(23*-g)+1):7*N(t/(4.03*d)),f[M+t]+=m*Math.min(g*Math.exp(-g*(10+7*c))*100,1)/700}}for(let e=0;e<44;e+=2)for(let t=0;t<n.length;t++){[w,b]=n[t];var b,w,x=parseInt(.5*T*b),y=parseInt((w+e)*T*a);for(let t=0;t<.1*T;t++)o[t+y]+=V[t+x]}return t}function W(e){return()=>{var t=v.createBufferSource();t.buffer=e,t.connect(v.destination),t.start()}}function F(t){let e=x;(x=v.createBufferSource()).buffer=t,x.loop=!0,x.connect(S?y:R),x.start(),setTimeout(()=>{e?.stop()},700),y.gain.setTargetAtTime(S?1:0,v.currentTime,.3),R.gain.setTargetAtTime(S?0:1,v.currentTime,1),S=!S}{v=new(window.AudioContext||window.webkitAudioContext),T=v.sampleRate,n=J(.2,t=>.03*N(t/(.3-220*Math.exp(-t/500)))),t=J(.2,t=>.05*(.3*q(t/(20+t/150))+Math.random())),a=J(.5,t=>.05*(.3*U(t/(120+t/250))+Math.random())*(.5*U(t/600)+.5)),o=J(.04,t=>.015*q(t/(14+t/100))),r=J(.1,t=>.008*U(t/(20+150*Math.exp(-t/1600)))),i=J(.3,t=>.03*(q(t/(14+t*t/1e6))+Math.random()/2)),h=J(.3,t=>.02*q(t/(200-t/30))),s=J(.4,t=>.01*U(t/(20+t/100)+Math.random())),f=J(.04,t=>.02*N(t/3)),l=J(2,t=>.04*(.5*U(t/800)+.5)*N(t/130)),u=J(2,t=>.02*U(t/(1+t/900))),c=J(.6,t=>.03*q(t/(30+q(t/900)+t/1300))),w=v.createBuffer(1,T,T),V=w.getChannelData(0);var Y=.1*T;for(let t=0;t<Y;t++)V[t]+=.01*(q(t/(70+t/300))+Math.random()/3)*(1-t/Y),V[parseInt(.5*T)+t]+=.005*Math.random()*(1-t/Y);let e=(d=v.createBuffer(1,3*T,T)).getChannelData(0);for(let t=0;t<3*T;t++){var Z=t/T;e[t]=k(t/120,10+10*q(t/1e4+Z*Z*Z*4))*Z/100}M=K(A(1,[0,2,3,5,7,12]),1.6),p=K(A(2,[0,2,3,5,7,8,11,12]),.5),m=K(A(3,[0,2,3,7,8,12]),.9),g=K(A(4,[0,2,3,7,8,12]),1.2),b=K(A(5,[0,4,5,7,12]),.8)}a0(d0,([,,,t])=>t?0:W(n)()),a0(M0,W(t)),a0(2,W(a)),a0(3,W(o)),a0(4,W(r)),a0(5,W(i)),a0(6,W(h)),a0(7,W(s)),a0(8,W(f)),a0(9,W(f)),a0(G,W(l)),a0(11,function(t){F([M,p,m,g,b][t])}),a0(12,()=>{(e=v.createBufferSource()).buffer=d,e.connect(v.destination),e.start()}),a0(13,()=>e.stop()),a0(14,W(u)),a0(15,W(u)),a0(16,W(c)),(y=new GainNode(v)).connect(v.destination),(R=new GainNode(v)).connect(v.destination),F(M)};a0(17,async function t(){o0(17,t);let e=document.getElementsByTagName("h1")[0],n=(e.innerText="Loading...",await new Promise(t=>setTimeout(t)),new w0,new e0);await n.generate(),[n,new n0,new U].map(y),a0(19,([t,e,n,a])=>{for(;0<n--;)y(new g0(t,e,400*(Math.random()-.5),300*-Math.random()-200,a))}),a0(8,t=>{s=Math.max(s+t,0)}),a0(2,t=>{c0=E(c0+-t,0,f)}),a0(15,t=>{N=t,c0=f}),a0(20,t=>{s>>=1,c0=f}),a0(7,([t,e,n])=>y(new b0(t,e,n))),a0(18,([t,e,n,a])=>y(new k(t,e,n,a))),e.remove(),requestAnimationFrame(V)});</script></html>