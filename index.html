<html><title>INFERNAL SIGIL</title><link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" sizes="64x64"/><style>canvas{width:100%;}body{overflow:none;background:#000;margin:0px;}</style><canvas/><script>(()=>{var l={};function n(t,n){(l[t]||(l[t]=[])).push(n)}function w(t,n){(l[t]||[]).map(t=>t(n))}var o=document.getElementsByTagName("canvas")[0],x=(o.width=1200,o.height=window.innerHeight*o.width/window.innerWidth,o.getContext("2d"));function V(t,n){x.strokeStyle=t,x.fillStyle=n||t}function Y(n,t,a,e,o,r,s=null){var i,h=x.getTransform(),l=(x.translate(t,a),x.rotate(r),Math.cos(o)),f=Math.sin(o);let c=e;for(let t=0;t<n.length;t++){var M=n[t];if(3==M.length)V(M[0],s||M[0]),i=M[1],x.lineWidth=i,c=e+M[2];else{x.beginPath(),x.moveTo(M[0]*l-c*f,M[1]);for(let t=2;t<M.length;t+=2)x.lineTo(M[t]*l-c*f,M[t+1]);s&&x.fill(),x.stroke()}}x.setTransform(h)}x.textBaseline="middle",x.lineJoin="round",x.lineCap="round";var r=[],b={},s=[],i=0;function h(t){const n=Math.min(.001*(t-i),.1);x.clearRect(0,0,o.width,o.height);var a,e=x.getTransform();x.translate(270,100),s.length=0,r.map(t=>{t.update?.(n)&&s.push(t)}),0<s.length&&(r=f(r,a=s),a.map(n=>{n.tags?.map(t=>{b[t]=f(b[t],[n])})})),r.map(t=>{t.render?.(x)}),requestAnimationFrame(h),i=t,x.setTransform(e)}function e(n){r.push(n),r.sort((t,n)=>t.order-n.order),n.tags?.map(t=>{b[t]=b[t]??[],b[t].push(n)})}function f(t,n){return t.filter(t=>!n.includes(t))}var p={};function c(t,n,a,e){return t<a+e&&a<t+n}function v(t,n,a,e,o,r){const s={set:(t,n,a,e,o,r)=>{s.x=t,s.y=n,s.ox=a,s.oy=e,s.w=o,s.h=r}};return s.isTouching=t=>{return n=s,t=t,n=c(n.x+n.ox,n.w,t.x+t.ox,t.w)&&c(n.y+n.oy,n.h,t.y+t.oy,t.h),x.beginPath(),x.lineWidth=2,x.strokeStyle="#fff",x.rect(t.x+t.ox,t.y+t.oy,t.w,t.h),x.stroke(),n;var n},s.set(t,n,a,e,o,r),s}window.onkeydown=t=>{p[t.code]||(p[t.code]=Date.now())};var M=[0,0,!(window.onkeyup=t=>{delete p[t.code]}),!1,!1,!1];function T(t,n){let a=n.x,e=n.y,o=!1,r=!1,s=!1,i=!1;return t.map(({physics:t})=>{n.isTouching(t)&&(e-16<t.y+t.h&&e-16>t.y&&(a-10<t.x&&(a=t.x+t.ox-n.ox-n.w+.1,r=!0),a+10>t.x+t.w&&(a=t.x+t.ox+t.w-n.ox-.1,s=!0)),r||s||(e-45<t.y&&(e=t.y+t.oy-n.oy-n.h+.1,o=!0),e-15>t.y+t.h&&(e=t.y+t.oy+t.h-n.oy,i=!0)),n.x=a,n.y=e)}),M[0]=a,M[1]=e,M[2]=o,M[3]=r,M[4]=s,M[5]=i,M}var t=function(A,G){let L=0,P=0,B=0,r=0,S=1,s=1,D=0,K=0,q=0,i=0,C=0,h=new v(A,G,-14,-55,28,50),F=0,l=0,f=0,Z=0,$=2,E=2,c=1,M=!1,u=0,g=0,J=0,N=0,d=0,m=0;const U=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],X=[["#e22",9,0],[0,-37,0,-17],[0,-17,7,0],[0,-17,-7,0]],j=[["#e22",9,0],[4,0,14,6],["#def",3,0],[18,5,25,8],[15,9,22,13]],z=[["#e22",9,0],[0,-17,-16,-6,-26,-6,-32,-15,-34,-22]],I=[["#ee2",6,0],[0,0,-5,-5,0,-17,5,-5],["#e62",6,0],[0,0,0,-9]],O=[["#e22",3,0],[0,0,-20,-10,-50,-5,-55,15,-25,6,-40,-5,-25,6,-20,-10,-25,6,0,4]],Q="rgba(230,100,70,0.5)";return{update:function(t){L+=t,c=Math.min(c+t,1),$=Math.min($+2*t,1),E=Math.min(E+2*t,1);var n=(p.ArrowLeft?-1:0)+(p.ArrowRight?1:0),a=(p.ArrowUp?1:0)+(p.ArrowDown?-1:0),e=Date.now()-p.KeyX<100;[A,G,onGround,onRightWall,onLeftWall,onRoof]=T(b.physics,h);let o=onRightWall&&0<S||onLeftWall&&S<0;o&&0<=l&&(o=!1),onGround&&(r=0,i=.15,g=0,onGround=!0),onRoof&&(r=0),3!=m?(.3<Math.abs(n)?(.2<c&&(B+=3e3*Math.sign(n)*t*Math.pow(1-K,6),L+=2*t,D+=4*(1-D)*t),s=Math.sign(n)):D+=4*(0-D)*t,(Math.sign(n)!=Math.sign(B)||c<.2)&&(B-=14*B*t),e&&.18<c&&u<3&&(M?$=0:E=0,u+=1,M=!M,c=0,Z=1,B=850*s,r=.25*r-100,w("attack",[new v(A,G,50*s-50,-50,100,50),s])),.4<c&&(u=0)):.3<Math.abs(a)?(n=Math.min(6*f,1),G-=370*Math.sign(a)*t*n,P+=18*t*a*n):(L+=t,P-=15*Math.sin(P)*t),Date.now()-p.KeyZ<100&&.15<d&&(3!=m?0<i?(r=-800,d=0):g<1&&(g+=1,J=1,r=-800,d=0):(r=-800,B=300*-S,l=.1,m=0,g=0,i=0,d=0,o=!1)),o?onGround&&3==m?m=0:(o&&!onGround&&.3<c||o&&onGround&&.3<a)&&(m=3,c=1,B=0):(3==m&&(.3<a||r<-.3)&&(r=-518,B=300*S,l=.1),m=0),3==m?0<=r?(r-=20*r*t,P+=r/10*t):(r-=10*r*t,P+=-r/10*t):(c<.2?r+=1e3*t:(i<=.1||r<0)&&(!p.KeyZ&&r<0?r+=4e3*t:r+=2e3*t),f=0),b.enemy.map(({enemyHitbox:t})=>{h.isTouching(t)&&F<=0&&(F=1,c=0,B=1100*Math.sign(A-t.x-t.w/2),r=-100,3==m&&(m=0,B=300*-s),w("player:hit",1))}),S+=15*(s-S)*t,F<=.7&&(B=Math.max(Math.min(B,400),-400)),r=Math.min(r,800),q+=17*(r-q)*t,C+=17*((0<i?1:0)-C)*t,K+=((3==m?1:0)-K)*(3==m?17:8)*t,Z+=17*((c<.35?1:0)-Z)*t,N+=17*(J-N)*t,G+=t*r,A+=t*B,i-=t,l-=t,f+=t,J=Math.max(J-(3==m?3*t:t),0),d+=t,F=Math.max(0,F-t),h.set(A,G,-14,-55,28,50)},render:function(t){var n=Math.sign(B)*Math.pow(Math.abs(B/400),.5),a=Z,e=1-a,o=K,r=1-o,s=(1-C)*r,i=1-s,h=D*r*e,l=(1-h)*r,f=N,c=1-f,M=1-Math.exp(6*-$),u=M-Math.pow($/1.5,2),g=(H=1-Math.exp(6*-E))-Math.pow(E/1.5,2),d=6*L,m=(.7*-S+.2*Math.cos(2*L))*l+(-.6*n+.1*Math.cos(.5*d))*h+-.6*S*o,p=5*n+Math.min(5*Math.cos(1.5*P),0)*S*o+(0<S?15+35*u-40*u*u:-15*u)*a,y=-37*l*e+(-31-n)*h*e+(2*Math.sin(1.5*P)-39)*o+(0<S?10*u-40:-28)*a,w=-.5*h+-1.2*q/800*r*e+(.9-2*S)*o+(0<S?2.8*u-1.2:4*u-.9)*a,x=4*n*e+Math.min(5*Math.cos(1.5*P+3),0)*S*o+(0<S?15*g-3:-15-35*g+40*g*g)*a,b=-37*l*e+(n-31)*h*e+(-37-2*S+2*Math.sin(1.5*P+3))*o+(0<S?-28:10*g-40)*a,v=.5*h*e+1.2*q/800*r+(-1.5*S-1)*o+(0<S?.9-4*g:1.6-2.9*g)*a,T=10*(n*r*e+a*S)+S*o*6,W=-37*l*e+-23*(h*e+a)+-43*o,R=.3*m+.2*n+S*q/2e3*r+1.1*-S*o,u=m+(.15*Math.sin(1.2*P)-.2)*o+(.5*u-.5*g)*a,g=t.getTransform(),k=0<S?M:H,H=0<S?H:M;V("#3af"),t.translate(A,G),S<0&&t.scale(-1,1),k<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.1,4*k-2.5,.5+k),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,-.2,4*k-2.5,.5+k),t.stroke()),t.setTransform(g),X[1][0]=10*n*e-7*o*S+15*a*S,X[1][1]=-37*l*e-23*(h*e+a)-35*o,X[2][2]=(7*l+(7*Math.cos(d)-4)*n)*i*r+(5+q/50)*s*S*r+(14*S+Math.min(7*Math.sin(-P),0))*o,X[2][3]=Math.min(7*Math.sin(d),0)*h*i*r+(-4-q/70)*s*r+(9*Math.cos(P)*S-8)*o,X[3][2]=(-7*l+(7*Math.cos(3.2+d)-4)*n)*i*r+(q/50-6)*s*S*r+(14*S+Math.min(7*Math.sin(3-P),0))*o,X[3][3]=Math.min(7*Math.sin(3.2+d),0)*h*i*r+(2-q/70)*s*r+(9*Math.cos(P+3)*S-8)*o,z[1][3]=+Math.cos(d)+31-37-q/50,z[1][5]=+Math.cos(1+d)+31-37-q/40,z[1][6]=-32-Math.abs(q/290),z[1][7]=2*Math.cos(2+d)+22-37-q/30,z[1][8]=q/70-34,z[1][9]=+Math.cos(3+d)+15-37-q/20,.1<F&&(t.globalAlpha=0<Math.cos(50*F)?.2:1),Y(z,A,G-8,0,1.57+m+.3*m,0),Y(I,A,G+z[1][9]-8,z[1][8],m+.3*m,.3*-n+.1*Math.cos(G/14)),0<S?Y(j,A+p,G+y-1.5*Math.cos(3+d)+1,0,m,w):Y(j,A+x,G+b-1.5*Math.cos(3+d)+1,0,3.14+m,v),t.fillStyle,Y(O,A-2,G-37+6*a,0,0*f+(.4*m+1.4)*c,-.7*c+q/2e3-f*f*4+2.8*J,Q),Y(O,A+2,G-37+6*a,0,3.14*f+(.4*m+1.6)*c,.7*c+q/2e3+f*f*4.4-2.8*J,Q),Y(X,A,G-8,0,m,0),Y(U,A+T,G+W+1.5*Math.cos(1+d)+1,10,u,R),0<S?Y(j,A+x,G+b-1.5*Math.cos(3+d)+1,0,3.14+m,v):Y(j,A+p,G+y-1.5*Math.cos(3+d)+1,0,m,w),t.globalAlpha=1,V("#3af"),t.translate(A,G),S<0&&t.scale(-1,1),H<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.2,-H,3-4*H),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,.1,-H,3-4*H),t.stroke()),t.setTransform(g)},order:1e3,tags:["player"],playerHitbox:h}};var a=function(f,c,t){let M=10*Math.random(),e=0,o=0,r=1,u=1,g=0,s=3;const i=new v(f,c,0,0,0,0),d=[["#fff",5,0],[0,-13,4,-29,13,-40],[0,-16,-2,-17],[2,-22,-3,-24],[4,-28,0,-30],[6,-33,4,-35]],m=[["#fff",5,0],[-8,0,0,-13,8,0]],p=[["#fff",5,0],[0,0,14,15]],y=[["#fff",9,0],[3,10,-3,10,-3,0,-6,-4,0,-10,6,-4,3,0,3,10],["#000",4,5],[-5,-6,-3,-5],[5,-6,3,-5]];function h([t,n]){i.isTouching(t)&&(e=600*n,r=-Math.sign(n),g=1,--s)}return n("attack",h),{update:function(t){if(s<=0)return w("bone:spawn",[f,c-55,4]),n=h,l[a="attack"]=(l[a]||[]).filter(t=>t!=n),!0;var n,a=!1;o+=1400*t,[f,c,a,onRightWall,onLeftWall,onRoof]=T(b.physics,i),onRightWall&&(r=-1),onLeftWall&&(r=1),(a||onRoof)&&(o=0),g<=0&&(e=60*u,.98<Math.random&&(r=-r)),0<g&&(e-=12*e*t),M+=t,f+=e*t,c+=o*t,u+=8*(r-u)*t,g=Math.max(0,g-2*t),i.set(f,c,-20,-59,40,60)},render:function(t){var n=.6*u,a=6*M,e=t.getTransform(),o=(o=1.3,r=f,s=c,x.translate(r,s),x.scale(o,o),x.translate(-r,-s),Math.cos(a)/20*1-u*g*.3),r=7*n*1+50*o,s=0*(-33-2*n+Math.cos(a))+ +(-33-2*n+Math.cos(a-1)),i=7*n*1+50*o,h=0*(2*n-33+Math.cos(a))+ +(2*n-33+Math.cos(2+a)),l=+(-40+Math.cos(1+a));m[1][0]=8*Math.cos(a)*u*1,m[1][1]=4*Math.min(0,Math.sin(a))*1,m[1][4]=8*Math.cos(3+a)*u*1,m[1][5]=4*Math.min(0,Math.sin(3+a))*1,.2<g&&(t.globalAlpha=0<Math.cos(25*g)?.2:1),Y(m,f,c,0,n,0),Y(p,f+r,c+s,-4,2.1*n,-n/3),Y(p,f+i,c+h,4,2.1*n+3.14,-n/3),Y(d,f,c,0,2*n-1.57,o),Y(y,f,c+l,23+70*o*u,-n,-g*u*.6),t.globalAlpha=1,t.setTransform(e)},order:500,tags:["enemy"],enemyHitbox:i}};var u=function(e,o,n,a){let r=7*Math.random(),s=7*Math.random(),i=0,h=!1,l=0;const f=new v(e,o,1,1),c=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){if(r+=t,l+=t,a+=2e3*t,[e,o,onGround,onRightWall,onLeftWall,onRoof]=T(b.physics,f),(onRightWall||onLeftWall)&&(n=-n),onGround&&(a=300<a?-.4*a:0,n-=9*n*t),onRoof&&(a=0),h?i+=3*t:b.player.map(({playerHitbox:t})=>{f.isTouching(t)&&.5<l&&(h=!0,w("bone:collect",1))}),.5<i)return!0;e+=n*t,o+=a*t,f.set(e,o,-15,-20,30,40)},render:function(t){var n=3*r,a=.2*Math.cos(r+s)+s;h?(V(`rgba(255, 255, 180, ${1-2*i})`),t.beginPath(),t.arc(e,o,40*i+10,0,6.28),t.fill()):Y(c,e,o,0,n,a)},collectHitbox:f}};var g=new function(){let n=0,e=3;return{addHp:function(t){var n,a;e=(t=e+t,n=0,a=3,Math.max(Math.min(t,a),n))},getHp:function(){return e},getMaxHp:function(){return 3},addBones:function(t){n=Math.max(n+t,0)},getBones:function(){return n}}};var d=function(){let f=0;const c=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],M=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){f+=t},render:function(t){const n=g;var a,e,o,r,s,i,h=t.getTransform(),l=(t.setTransform(1,0,0,1,0,0),t.scale(.8,.8),n.getMaxHp(),n.getHp());for(let t=0;t<n.getMaxHp();t++)t>=l?(c[0][0]="#555",c[3][0]="#555"):(c[0][0]="#e22",c[3][0]="#fff"),Y(c,50+55*t,72,0,0,0);Y(M,50,103,0,f,0),a=n.getBones(),e=70,o=105,r="#fff",s=30,i="left",x.fillStyle=r,x.textAlign=i,x.font=`bold ${s}px arial`,x.fillText(a,e,o),t.setTransform(h)},order:1e4}};requestAnimationFrame(h),e(new t(150,400)),e(new a(500,439)),e(new u(300,300,0,0)),e(new d),e({tags:["physics"],physics:new v(0,440,0,0,800,100)}),e({tags:["physics"],physics:new v(650,100,0,0,100,340)}),e({tags:["physics"],physics:new v(250,340,0,0,100,100)}),n("bone:spawn",([t,n,a])=>{for(;0<a--;)e(new u(t,n,400*(Math.random()-.5),300*-Math.random()-200))}),n("bone:collect",t=>g.addBones(t)),n("player:hit",t=>g.addHp(-t))})();</script></html>