<html><title>INFERNAL SIGIL</title><link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" sizes="64x64"/><style>canvas{width:100%;}body{overflow:none;background:#000;margin:0px;}</style><canvas/><script>(()=>{var c={};function e(t,e){(c[t]||(c[t]=[])).push(e)}function w(t,e){(c[t]||[]).map(t=>t(e))}var o=document.getElementsByTagName("canvas")[0],x=(o.width=1200,o.height=window.innerHeight*o.width/window.innerWidth,o.getContext("2d"));function V(t,e){x.strokeStyle=t,x.fillStyle=e}function Y(e,t,a,n,o,i,s=null){var r,h=x.getTransform(),c=(x.translate(t,a),x.rotate(i),Math.cos(o)),f=Math.sin(o);let l=n;for(let t=0;t<e.length;t++){var M=e[t];if(3==M.length)V(M[0],s||M[0]),r=M[1],x.lineWidth=r,l=n+M[2];else{x.beginPath(),x.moveTo(M[0]*c-l*f,M[1]);for(let t=2;t<M.length;t+=2)x.lineTo(M[t]*c-l*f,M[t+1]);s&&x.fill(),x.stroke()}}x.setTransform(h)}x.textBaseline="middle",x.lineJoin="round",x.lineCap="round";var i=[],v={},s=[],r=0;function h(t){const e=Math.min(.001*(t-r),.1);x.clearRect(0,0,o.width,o.height);var a,n=x.getTransform();x.translate(270,100),s.length=0,i.map(t=>{t.update?.(e)&&s.push(t)}),0<s.length&&(i=f(i,a=s),a.map(e=>{e.tags?.map(t=>{v[t]=f(v[t],[e])})})),i.map(t=>{t.render?.(x)}),requestAnimationFrame(h),r=t,x.setTransform(n)}function n(e){i.push(e),i.sort((t,e)=>t.order-e.order),e.tags?.map(t=>{v[t]=v[t]??[],v[t].push(e)})}function f(t,e){return t.filter(t=>!e.includes(t))}var d={};function l(t,e,a,n){return t<a+n&&a<t+e}function b(t,e,a,n,o,i){const s={set:(t,e,a,n,o,i)=>{s.x=t,s.y=e,s.ox=a,s.oy=n,s.w=o,s.h=i}};return s.isTouching=t=>{return e=s,t=t,a=l(e.x+e.ox,e.w,t.x+t.ox,t.w)&&l(e.y+e.oy,e.h,t.y+t.oy,t.h),x.beginPath(),x.lineWidth=2,x.strokeStyle="#fff",x.rect(t.x+t.ox,t.y+t.oy,t.w,t.h),x.rect(e.x+e.ox,e.y+e.oy,e.w,e.h),x.stroke(),a;var e,a},s.set(t,e,a,n,o,i),s}window.onkeydown=t=>{d[t.code]||(d[t.code]=Date.now())},window.onkeyup=t=>{delete d[t.code]};var t=function(P,S){let W=0,D=0,F=0,s=0,K=1,r=1,q=0,C=0,R=0,h=0,Z=0,c=new b(P,S,-14,-55,28,50),E=0,f=0,l=0,J=0,L=2,N=2,M=1,u=!1,p=0,m=0,U=0,X=0,g=0,y=0;const $=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],j=[["#e22",9,0],[0,-37,0,-17],[0,-17,7,0],[0,-17,-7,0]],z=[["#e22",9,0],[4,0,14,6],["#def",3,0],[18,5,25,8],[15,9,22,13]],G=[["#e22",9,0],[0,-17,-16,-6,-26,-6,-32,-15,-34,-22]],I=[["#ee2",6,0],[0,0,-5,-5,0,-17,5,-5],["#e62",6,0],[0,0,0,-9]],O=[["#e22",3,0],[0,0,-20,-10,-50,-5,-55,15,-25,6,-40,-5,-25,6,-20,-10,-25,6,0,4]],Q="rgba(230,100,70,0.5)";return{update:function(t){W+=t,M=Math.min(M+t,1),L=Math.min(L+2*t,1),N=Math.min(N+2*t,1);var e=(d.ArrowLeft?-1:0)+(d.ArrowRight?1:0),a=(d.ArrowUp?1:0)+(d.ArrowDown?-1:0),n=Date.now()-d.KeyX<100;let o=!1,i=!1;v.physics.map(({physics:t})=>{if(c.isTouching(t)){if(S-16<t.y+t.h&&S-16>t.y){if(P-10<t.x)return P=t.x-13,void(0<K&&f<0&&(i=!0));if(P+10>t.x+t.w)return P=t.x+t.w+13,void(K<0&&f<0&&(i=!0))}S-45<t.y&&-10<=s&&(s=0,S=t.y+5.1,h=.15,m=0,o=!0),S-15>t.y+t.h&&(s<-100||3==y)&&(s=0,S=t.y+t.h+55)}}),3!=y?(.3<Math.abs(e)?(.2<M&&(F+=3e3*Math.sign(e)*t*Math.pow(1-C,6),W+=2*t,q+=4*(1-q)*t),r=Math.sign(e)):q+=4*(0-q)*t,(Math.sign(e)!=Math.sign(F)||M<.2)&&(F-=14*F*t),n&&.18<M&&p<3&&(u?L=0:N=0,p+=1,u=!u,M=0,J=1,F=850*r,s=.25*s-100,w("attack",[new b(P,S,50*r-50,-50,100,50),r])),.55<M&&(p=0)):.3<Math.abs(a)?(e=Math.min(6*l,1),S-=370*Math.sign(a)*t*e,D+=18*t*a*e):(W+=t,D-=15*Math.sin(D)*t),Date.now()-d.KeyZ<100&&.15<g&&(3!=y?0<h?(s=-800,g=0):m<1&&(m+=1,U=1,s=-800,g=0):(s=-800,F=300*-K,f=.1,y=0,m=0,h=0,g=0,i=!1)),i?o&&3==y?y=0:(i&&!o&&.3<M||i&&o&&.3<a)&&(y=3,M=1,F=0):(3==y&&(.3<a||s<-10)&&(s=-518,F=300*K,f=.1),y=0),3==y?0<=s?(s-=20*s*t,D+=s/10*t):(s-=10*s*t,D+=-s/10*t):(M<.2?s+=1e3*t:(h<=.1||s<0)&&(!d.KeyZ&&s<0?s+=4e3*t:s+=2e3*t),l=0),v.enemy.map(({enemyHitbox:t})=>{c.isTouching(t)&&E<=0&&(E=1,M=0,F=1100*Math.sign(P-t.x-t.w/2),s=-100,3==y&&(y=0,F=300*-r),w("player:hit",1))}),K+=15*(r-K)*t,E<=.7&&(F=Math.max(Math.min(F,400),-400)),s=Math.min(s,800),R+=17*(s-R)*t,Z+=17*((0<h?1:0)-Z)*t,C+=((3==y?1:0)-C)*(3==y?17:8)*t,J+=17*((M<.35?1:0)-J)*t,X+=17*(U-X)*t,S+=t*s,P+=t*F,h-=t,f-=t,l+=t,U=Math.max(U-(3==y?3*t:t),0),g+=t,E=Math.max(0,E-t),c.set(P,S,-14,-55,28,50)},render:function(t){var e=Math.sign(F)*Math.pow(Math.abs(F/400),.5),a=J,n=1-a,o=C,i=1-o,s=(1-Z)*i,r=1-s,h=q*i*n,c=(1-h)*i,f=X,l=1-f,M=1-Math.exp(6*-L),u=M-Math.pow(L/1.5,2),p=(B=1-Math.exp(6*-N))-Math.pow(N/1.5,2),m=6*W,g=(.7*-K+.2*Math.cos(2*W))*c+(-.6*e+.1*Math.cos(.5*m))*h+-.6*K*o,y=5*e+Math.min(5*Math.cos(1.5*D),0)*K*o+(0<K?15+35*u-40*u*u:-15*u)*a,d=-37*c*n+(-31-e)*h*n+(2*Math.sin(1.5*D)-39)*o+(0<K?10*u-40:-28)*a,w=-.5*h+-1.2*R/800*i*n+(.9-2*K)*o+(0<K?2.8*u-1.2:4*u-.9)*a,x=4*e*n+Math.min(5*Math.cos(1.5*D+3),0)*K*o+(0<K?15*p-3:-15-35*p+40*p*p)*a,v=-37*c*n+(e-31)*h*n+(-37-2*K+2*Math.sin(1.5*D+3))*o+(0<K?-28:10*p-40)*a,b=.5*h*n+1.2*R/800*i+(-1.5*K-1)*o+(0<K?.9-4*p:1.6-2.9*p)*a,T=10*(e*i*n+a*K)+K*o*6,k=-37*c*n+-23*(h*n+a)+-43*o,H=.3*g+.2*e+K*R/2e3*i+1.1*-K*o,u=g+(.15*Math.sin(1.2*D)-.2)*o+(.5*u-.5*p)*a,p=t.getTransform(),A=0<K?M:B,B=0<K?B:M;V("#3af"),t.translate(P,S),K<0&&t.scale(-1,1),A<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.1,4*A-2.5,.5+A),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,-.2,4*A-2.5,.5+A),t.stroke()),t.setTransform(p),j[1][0]=10*e*n-7*o*K+15*a*K,j[1][1]=-37*c*n-23*(h*n+a)-35*o,j[2][2]=(7*c+(7*Math.cos(m)-4)*e)*r*i+(5+R/50)*s*K*i+(14*K+Math.min(7*Math.sin(-D),0))*o,j[2][3]=Math.min(7*Math.sin(m),0)*h*r*i+(-4-R/70)*s*i+(9*Math.cos(D)*K-8)*o,j[3][2]=(-7*c+(7*Math.cos(3.2+m)-4)*e)*r*i+(R/50-6)*s*K*i+(14*K+Math.min(7*Math.sin(3-D),0))*o,j[3][3]=Math.min(7*Math.sin(3.2+m),0)*h*r*i+(2-R/70)*s*i+(9*Math.cos(D+3)*K-8)*o,G[1][3]=+Math.cos(m)+31-37-R/50,G[1][5]=+Math.cos(1+m)+31-37-R/40,G[1][6]=-32-Math.abs(R/290),G[1][7]=2*Math.cos(2+m)+22-37-R/30,G[1][8]=R/70-34,G[1][9]=+Math.cos(3+m)+15-37-R/20,.1<E&&(t.globalAlpha=0<Math.cos(50*E)?.2:1),Y(G,P,S-8,0,1.57+g+.3*g,0),Y(I,P,S+G[1][9]-8,G[1][8],g+.3*g,.3*-e+.1*Math.cos(S/14)),0<K?Y(z,P+y,S+d-1.5*Math.cos(3+m)+1,0,g,w):Y(z,P+x,S+v-1.5*Math.cos(3+m)+1,0,3.14+g,b),t.fillStyle,Y(O,P-2,S-37+6*a,0,0*f+(.4*g+1.4)*l,-.7*l+R/2e3-f*f*4+2.8*U,Q),Y(O,P+2,S-37+6*a,0,3.14*f+(.4*g+1.6)*l,.7*l+R/2e3+f*f*4.4-2.8*U,Q),Y(j,P,S-8,0,g,0),Y($,P+T,S+k+1.5*Math.cos(1+m)+1,10,u,H),0<K?Y(z,P+x,S+v-1.5*Math.cos(3+m)+1,0,3.14+g,b):Y(z,P+y,S+d-1.5*Math.cos(3+m)+1,0,g,w),t.globalAlpha=1,V("#3af"),t.translate(P,S),K<0&&t.scale(-1,1),B<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.2,-B,3-4*B),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,.1,-B,3-4*B),t.stroke()),t.setTransform(p)},order:1e3,tags:["player"],playerHitbox:c}};var a=function(f,l,t){let M=0,n=0,o=0,i=1,u=1,p=0,s=3;const r=new b(0,0,0,0,0,0),m=[["#fff",5,0],[0,-13,4,-29,13,-40],[0,-16,-2,-17],[2,-22,-3,-24],[4,-28,0,-30],[6,-33,4,-35]],g=[["#fff",5,0],[-8,0,0,-13,8,0]],y=[["#fff",5,0],[0,0,14,15]],d=[["#fff",9,0],[3,10,-3,10,-3,0,-6,-4,0,-10,6,-4,3,0,3,10],["#000",4,5],[-5,-6,-3,-5],[5,-6,3,-5]];function h([t,e]){r.isTouching(t)&&(n=600*e,i=-Math.sign(e),p=1,--s)}return e("attack",h),{update:function(t){if(s<=0)return w("bone:spawn",[f,l-55,4]),a=h,c[e="attack"]=(c[e]||[]).filter(t=>t!=a),!0;var e,a;o+=1400*t,v.physics.map(({physics:t})=>{if(r.isTouching(t)){if(l-16<t.y+t.h&&l-16>t.y){if(f-10<t.x)return f=t.x-20,void(i=-1);if(f+10>t.x+t.w)return f=t.x+t.w+20,void(i=1)}l-45<t.y&&(o=0,l=t.y+.1),l-15>t.y+t.h&&(o<-100||3==state)&&(o=0,l=t.y+t.h+55)}}),p<=0&&(n=60*u,.98<Math.random&&(i=-i)),0<p&&(n-=12*n*t),M+=t,f+=n*t,l+=o*t,u+=8*(i-u)*t,p=Math.max(0,p-2*t),r.set(f,l,-20,-59,40,60)},render:function(t){var e=.6*u,a=6*M,n=t.getTransform(),o=(o=1.3,i=f,s=l,x.translate(i,s),x.scale(o,o),x.translate(-i,-s),Math.cos(a)/20*1-u*p*.3),i=7*e*1+50*o,s=0*(-33-2*e+Math.cos(a))+ +(-33-2*e+Math.cos(a-1)),r=7*e*1+50*o,h=0*(2*e-33+Math.cos(a))+ +(2*e-33+Math.cos(2+a)),c=+(-40+Math.cos(1+a));g[1][0]=8*Math.cos(a)*u*1,g[1][1]=4*Math.min(0,Math.sin(a))*1,g[1][4]=8*Math.cos(3+a)*u*1,g[1][5]=4*Math.min(0,Math.sin(3+a))*1,.2<p&&(t.globalAlpha=0<Math.cos(25*p)?.2:1),Y(g,f,l,0,e,0),Y(y,f+i,l+s,-4,2.1*e,-e/3),Y(y,f+r,l+h,4,2.1*e+3.14,-e/3),Y(m,f,l,0,2*e-1.57,o),Y(d,f,l+c,23+70*o*u,-e,-p*u*.6),t.globalAlpha=1,t.setTransform(n)},order:500,tags:["enemy"],enemyHitbox:r}};var M=function(n,o,i,s){let r=7*Math.random(),h=7*Math.random();const c=new b(n,o,1,1),f=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){r+=t,s+=2e3*t;let e=!1,a=(v.physics.map(({physics:t})=>{if(c.isTouching(t)){if(o-16<t.y+t.h&&o-16>t.y){if(n-10<t.x)return n=t.x-15,i=-i,void(targetFacing=-1);if(n+10>t.x+t.w)return n=t.x+t.w+15,i=-i,void(targetFacing=1)}o-45<t.y&&(s=300<s?-.4*s:0,i*=.7,o=t.y-19.9,e=!0),o-15>t.y+t.h&&(s<-100||3==state)&&(s=0,o=t.y+t.h+20)}}),e&&(i-=9*i*t),!1);if(v.player.map(({playerHitbox:t})=>{c.isTouching(t)&&(a=!0)}),a)return w("bone:collect",1),!0;n+=i*t,o+=s*t,c.set(n,o,-15,-20,30,40)},render:function(t){var e=3*r,a=.2*Math.cos(r+h)+h;Y(f,n,o,0,e,a)},collectHitbox:c}};var u=new function(){let e=0,n=3;return{addHp:function(t){var e,a;n=(t=n+t,e=0,a=3,Math.max(Math.min(t,a),e))},getHp:function(){return n},getMaxHp:function(){return 3},addBones:function(t){e=Math.max(e+t,0)},getBones:function(){return e}}};var p=function(){let f=0;const l=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],M=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){f+=t},render:function(t){const e=u;var a,n,o,i,s,r,h=t.getTransform(),c=(t.setTransform(1,0,0,1,0,0),t.scale(.8,.8),e.getMaxHp(),e.getHp());for(let t=0;t<e.getMaxHp();t++)t>=c?(l[0][0]="#555",l[3][0]="#555"):(l[0][0]="#e22",l[3][0]="#fff"),Y(l,50+55*t,72,0,0,0);Y(M,50,103,0,f,0),a=e.getBones(),n=70,o=105,i="#fff",s=30,r="left",x.fillStyle=i,x.textAlign=r,x.font=`bold ${s}px arial`,x.fillText(a,n,o),t.setTransform(h)},order:1e4}};requestAnimationFrame(h),n(new t(150,400)),n(new a(500,439)),n(new M(300,300,0,0)),n(new p),n({tags:["physics"],physics:new b(0,440,0,0,800,100)}),n({tags:["physics"],physics:new b(650,100,0,0,100,340)}),n({tags:["physics"],physics:new b(250,340,0,0,100,100)}),e("bone:spawn",([t,e,a])=>{for(;0<a--;)n(new M(t,e,400*(Math.random()-.5),300*-Math.random()-200))}),e("bone:collect",t=>u.addBones(t)),e("player:hit",t=>u.addHp(-t))})();</script></html>