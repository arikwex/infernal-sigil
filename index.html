<html><title>INFERNAL SIGIL</title><link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" sizes="64x64"/><style>canvas{width:100%;}body{overflow:none;background:#000;margin:0px;}</style><canvas/><script>(()=>{var c={};function n(t,n){(c[t]||(c[t]=[])).push(n)}function w(t,n){(c[t]||[]).map(t=>t(n))}var p=document.getElementsByTagName("canvas")[0],x=(p.width=window.innerWidth,p.height=window.innerHeight*p.width/window.innerWidth,p.getContext("2d"));function V(t,n){x.strokeStyle=t,x.fillStyle=n||t}function Y(n,t,a,e,o,s,h=null){var i,r=x.getTransform(),c=(x.translate(t,a),x.rotate(s),Math.cos(o)),l=Math.sin(o);let f=e;for(let t=0;t<n.length;t++){var M=n[t];if(3==M.length)V(M[0],h||M[0]),i=M[1],x.lineWidth=i,f=e+M[2];else{x.beginPath(),x.moveTo(M[0]*c-f*l,M[1]);for(let t=2;t<M.length;t+=2)x.lineTo(M[t]*c-f*l,M[t+1]);h&&x.fill(),x.stroke()}}x.setTransform(r)}x.textBaseline="middle",x.lineJoin="round",x.lineCap="round";var s=[],b={},h=[],i=0;function r(t){const n=Math.min(.001*(t-i),.1);x.clearRect(0,0,p.width,p.height);var a,e=x.getTransform();const o=b.camera[0];o.set(x),h.length=0,s.map(t=>{t.update?.(n)&&h.push(t)}),0<h.length&&(s=l(s,a=h),a.map(n=>{n.tags?.map(t=>{b[t]=l(b[t],[n])})})),s.map(t=>{t.render?.(x)}),requestAnimationFrame(r),i=t,x.setTransform(e)}function e(n){s.push(n),s.sort((t,n)=>t.order-n.order),n.tags?.map(t=>{b[t]=b[t]??[],b[t].push(n)})}function l(t,n){return t.filter(t=>!n.includes(t))}var y={};function f(t,n,a,e){return t<a+e&&a<t+n}function v(t,n,a,e,o,s){const h={set:(t,n,a,e,o,s)=>{h.x=t,h.y=n,h.ox=a,h.oy=e,h.w=o,h.h=s}};return h.isTouching=t=>{return n=h,t=t,n=f(n.x+n.ox,n.w,t.x+t.ox,t.w)&&f(n.y+n.oy,n.h,t.y+t.oy,t.h),x.beginPath(),x.lineWidth=2,x.strokeStyle="#fff",x.rect(t.x+t.ox,t.y+t.oy,t.w,t.h),x.stroke(),n;var n},h.set(t,n,a,e,o,s),h}window.onkeydown=t=>{y[t.code]||(y[t.code]=Date.now())};var M=[0,0,!(window.onkeyup=t=>{delete y[t.code]}),!1,!1,!1];function T(t,n){let a=n.x,e=n.y,o=!1,s=!1,h=!1,i=!1;return t.map(({physics:t})=>{n.isTouching(t)&&(e-16<t.y+t.h&&e-16>t.y&&(a-10<t.x&&(a=t.x+t.ox-n.ox-n.w+.1,s=!0),a+10>t.x+t.w&&(a=t.x+t.ox+t.w-n.ox-.1,h=!0)),s||h||(e-45<t.y&&(e=t.y+t.oy-n.oy-n.h+.1,o=!0),e-15>t.y+t.h&&(e=t.y+t.oy+t.h-n.oy,i=!0)),n.x=a,n.y=e)}),M[0]=a,M[1]=e,M[2]=o,M[3]=s,M[4]=h,M[5]=i,M}var t=function(A,G){let L=0,P=0,B=0,s=0,S=1,h=1,D=0,K=0,q=0,i=0,C=0,r=new v(A,G,-14,-55,28,50),F=0,c=0,l=0,Z=0,$=2,E=2,f=1,M=!1,p=0,u=0,J=0,N=0,g=0,d=0;const U=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],X=[["#e22",9,0],[0,-37,0,-17],[0,-17,7,0],[0,-17,-7,0]],j=[["#e22",9,0],[4,0,14,6],["#def",3,0],[18,5,25,8],[15,9,22,13]],z=[["#e22",9,0],[0,-17,-16,-6,-26,-6,-32,-15,-34,-22]],I=[["#ee2",6,0],[0,0,-5,-5,0,-17,5,-5],["#e62",6,0],[0,0,0,-9]],O=[["#e22",3,0],[0,0,-20,-10,-50,-5,-55,15,-25,6,-40,-5,-25,6,-20,-10,-25,6,0,4]],Q="rgba(230,100,70,0.5)";return{update:function(t){L+=t,f=Math.min(f+t,1),$=Math.min($+2*t,1),E=Math.min(E+2*t,1);var n=(y.ArrowLeft?-1:0)+(y.ArrowRight?1:0);let a=(y.ArrowUp?1:0)+(y.ArrowDown?-1:0);var e=Date.now()-y.KeyX<100;3==d&&Math.abs(a)<.3&&.3<Math.abs(n)&&Math.sign(n)==Math.sign(S)&&(a=1),[A,G,onGround,onRightWall,onLeftWall,onRoof]=T(b.physics,r);let o=onRightWall&&0<S||onLeftWall&&S<0;o&&0<=c&&(o=!1),onGround&&(s=0,i=.15,u=0,onGround=!0),onRoof&&(s=0),3!=d?(.3<Math.abs(n)?(.2<f&&(B+=3e3*Math.sign(n)*t*Math.pow(1-K,6),L+=2*t,D+=4*(1-D)*t),h=Math.sign(n)):D+=4*(0-D)*t,(Math.sign(n)!=Math.sign(B)||f<.2)&&(B-=14*B*t),e&&.18<f&&p<3&&(M?$=0:E=0,p+=1,M=!M,f=0,Z=1,B=850*h,s=.25*s-100,w("attack",[new v(A,G,50*h-50,-50,100,50),h])),.4<f&&(p=0)):.3<Math.abs(a)?(n=Math.min(6*l,1),G-=370*Math.sign(a)*t*n,P+=18*t*a*n):(L+=t,P-=15*Math.sin(P)*t),Date.now()-y.KeyZ<100&&.15<g&&(3!=d?0<i?(s=-800,g=0):u<1&&(u+=1,J=1,s=-800,g=0):(s=-800,B=300*-S,c=.1,d=0,u=0,i=0,g=0,o=!1)),o?onGround&&3==d?d=0:(o&&!onGround&&.3<f||o&&onGround&&.3<a)&&(d=3,f=1,B=0):(3==d&&(.3<a||s<-.3)&&(s=-518,B=300*S,c=.1),d=0),3==d?0<=s?(s-=20*s*t,P+=s/10*t):(s-=10*s*t,P+=-s/10*t):(f<.2?s+=1e3*t:(i<=.1||s<0)&&(!y.KeyZ&&s<0?s+=4e3*t:s+=2e3*t),l=0),b.enemy.map(({enemyHitbox:t})=>{r.isTouching(t)&&F<=0&&(F=1,f=0,B=1100*Math.sign(A-t.x-t.w/2),s=-100,3==d&&(d=0,B=300*-h),w("player:hit",1))}),S+=15*(h-S)*t,F<=.7&&(B=Math.max(Math.min(B,400),-400)),s=Math.min(s,800),q+=17*(s-q)*t,C+=17*((0<i?1:0)-C)*t,K+=((3==d?1:0)-K)*(3==d?17:8)*t,Z+=17*((f<.35?1:0)-Z)*t,N+=17*(J-N)*t,G+=t*s,A+=t*B,i-=t,c-=t,l+=t,J=Math.max(J-(3==d?3*t:t),0),g+=t,F=Math.max(0,F-t),r.set(A,G,-14,-55,28,50)},render:function(t){var n=Math.sign(B)*Math.pow(Math.abs(B/400),.5),a=Z,e=1-a,o=K,s=1-o,h=(1-C)*s,i=1-h,r=D*s*e,c=(1-r)*s,l=N,f=1-l,M=1-Math.exp(6*-$),p=M-Math.pow($/1.5,2),u=(k=1-Math.exp(6*-E))-Math.pow(E/1.5,2),g=6*L,d=(.7*-S+.2*Math.cos(2*L))*c+(-.6*n+.1*Math.cos(.5*g))*r+-.6*S*o,y=5*n+Math.min(5*Math.cos(1.5*P),0)*S*o+(0<S?15+35*p-40*p*p:-15*p)*a,m=-37*c*e+(-31-n)*r*e+(2*Math.sin(1.5*P)-39)*o+(0<S?10*p-40:-28)*a,w=-.5*r+-1.2*q/800*s*e+(.9-2*S)*o+(0<S?2.8*p-1.2:4*p-.9)*a,x=4*n*e+Math.min(5*Math.cos(1.5*P+3),0)*S*o+(0<S?15*u-3:-15-35*u+40*u*u)*a,b=-37*c*e+(n-31)*r*e+(-37-2*S+2*Math.sin(1.5*P+3))*o+(0<S?-28:10*u-40)*a,v=.5*r*e+1.2*q/800*s+(-1.5*S-1)*o+(0<S?.9-4*u:1.6-2.9*u)*a,T=10*(n*s*e+a*S)+S*o*6,W=-37*c*e+-23*(r*e+a)+-43*o,H=.3*d+.2*n+S*q/2e3*s+1.1*-S*o,p=d+(.15*Math.sin(1.2*P)-.2)*o+(.5*p-.5*u)*a,u=t.getTransform(),R=0<S?M:k,k=0<S?k:M;V("#3af"),t.translate(A,G),S<0&&t.scale(-1,1),R<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.1,4*R-2.5,.5+R),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,-.2,4*R-2.5,.5+R),t.stroke()),t.setTransform(u),X[1][0]=10*n*e-7*o*S+15*a*S,X[1][1]=-37*c*e-23*(r*e+a)-35*o,X[2][2]=(7*c+(7*Math.cos(g)-4)*n)*i*s+(5+q/50)*h*S*s+(14*S+Math.min(7*Math.sin(-P),0))*o,X[2][3]=Math.min(7*Math.sin(g),0)*r*i*s+(-4-q/70)*h*s+(9*Math.cos(P)*S-8)*o,X[3][2]=(-7*c+(7*Math.cos(3.2+g)-4)*n)*i*s+(q/50-6)*h*S*s+(14*S+Math.min(7*Math.sin(3-P),0))*o,X[3][3]=Math.min(7*Math.sin(3.2+g),0)*r*i*s+(2-q/70)*h*s+(9*Math.cos(P+3)*S-8)*o,z[1][3]=+Math.cos(g)+31-37-q/50,z[1][5]=+Math.cos(1+g)+31-37-q/40,z[1][6]=-32-Math.abs(q/290),z[1][7]=2*Math.cos(2+g)+22-37-q/30,z[1][8]=q/70-34,z[1][9]=+Math.cos(3+g)+15-37-q/20,.1<F&&(t.globalAlpha=0<Math.cos(50*F)?.2:1),Y(z,A,G-8,0,1.57+d+.3*d,0),Y(I,A,G+z[1][9]-8,z[1][8],d+.3*d,.3*-n+.1*Math.cos(G/14)),0<S?Y(j,A+y,G+m-1.5*Math.cos(3+g)+1,0,d,w):Y(j,A+x,G+b-1.5*Math.cos(3+g)+1,0,3.14+d,v),t.fillStyle,Y(O,A-2,G-37+6*a,0,0*l+(.4*d+1.4)*f,-.7*f+q/2e3-l*l*4+2.8*J,Q),Y(O,A+2,G-37+6*a,0,3.14*l+(.4*d+1.6)*f,.7*f+q/2e3+l*l*4.4-2.8*J,Q),Y(X,A,G-8,0,d,0),Y(U,A+T,G+W+1.5*Math.cos(1+g)+1,10,p,H),0<S?Y(j,A+x,G+b-1.5*Math.cos(3+g)+1,0,3.14+d,v):Y(j,A+y,G+m-1.5*Math.cos(3+g)+1,0,d,w),t.globalAlpha=1,V("#3af"),t.translate(A,G),S<0&&t.scale(-1,1),k<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.2,-k,3-4*k),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,.1,-k,3-4*k),t.stroke()),t.setTransform(u)},order:1e3,tags:["player"],playerHitbox:r}};var a=function(l,f,t){let M=10*Math.random(),e=0,o=0,s=1,p=1,u=0,h=3;const i=new v(l,f,0,0,0,0),g=[["#fff",5,0],[0,-13,4,-29,13,-40],[0,-16,-2,-17],[2,-22,-3,-24],[4,-28,0,-30],[6,-33,4,-35]],d=[["#fff",5,0],[-8,0,0,-13,8,0]],y=[["#fff",5,0],[0,0,14,15]],m=[["#fff",9,0],[3,10,-3,10,-3,0,-6,-4,0,-10,6,-4,3,0,3,10],["#000",4,5],[-5,-6,-3,-5],[5,-6,3,-5]];function r([t,n]){i.isTouching(t)&&(e=600*n,s=-Math.sign(n),u=1,--h)}return n("attack",r),{update:function(t){if(h<=0)return w("bone:spawn",[l,f-55,4]),n=r,c[a="attack"]=(c[a]||[]).filter(t=>t!=n),!0;var n,a=!1;o+=1400*t,[l,f,a,onRightWall,onLeftWall,onRoof]=T(b.physics,i),onRightWall&&(s=-1),onLeftWall&&(s=1),(a||onRoof)&&(o=0),u<=0&&(e=60*p,.98<Math.random&&(s=-s)),0<u&&(e-=12*e*t),M+=t,l+=e*t,f+=o*t,p+=8*(s-p)*t,u=Math.max(0,u-2*t),i.set(l,f,-20,-59,40,60)},render:function(t){var n=.6*p,a=6*M,e=t.getTransform(),o=(o=1.3,s=l,h=f,x.translate(s,h),x.scale(o,o),x.translate(-s,-h),Math.cos(a)/20*1-p*u*.3),s=7*n*1+50*o,h=0*(-33-2*n+Math.cos(a))+ +(-33-2*n+Math.cos(a-1)),i=7*n*1+50*o,r=0*(2*n-33+Math.cos(a))+ +(2*n-33+Math.cos(2+a)),c=+(-40+Math.cos(1+a));d[1][0]=8*Math.cos(a)*p*1,d[1][1]=4*Math.min(0,Math.sin(a))*1,d[1][4]=8*Math.cos(3+a)*p*1,d[1][5]=4*Math.min(0,Math.sin(3+a))*1,.2<u&&(t.globalAlpha=0<Math.cos(25*u)?.2:1),Y(d,l,f,0,n,0),Y(y,l+s,f+h,-4,2.1*n,-n/3),Y(y,l+i,f+r,4,2.1*n+3.14,-n/3),Y(g,l,f,0,2*n-1.57,o),Y(m,l,f+c,23+70*o*p,-n,-u*p*.6),t.globalAlpha=1,t.setTransform(e)},order:500,tags:["enemy"],enemyHitbox:i}};var o=function(e,o,n,a){let s=7*Math.random(),h=7*Math.random(),i=0,r=!1,c=0;const l=new v(e,o,1,1),f=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){if(s+=t,c+=t,a+=2e3*t,[e,o,onGround,onRightWall,onLeftWall,onRoof]=T(b.physics,l),(onRightWall||onLeftWall)&&(n=-n),onGround&&(a=300<a?-.4*a:0,n-=9*n*t),onRoof&&(a=0),r?i+=3*t:b.player.map(({playerHitbox:t})=>{l.isTouching(t)&&.5<c&&(r=!0,w("bone:collect",1))}),.5<i)return!0;e+=n*t,o+=a*t,l.set(e,o,-15,-20,30,40)},render:function(t){var n=3*s,a=.2*Math.cos(s+h)+h;r?(V(`rgba(255, 255, 180, ${1-2*i})`),t.beginPath(),t.arc(e,o,40*i+10,0,6.28),t.fill()):Y(f,e,o,0,n,a)},collectHitbox:l}};var u=new function(){let n=0,e=3;return{addHp:function(t){var n,a;e=(t=e+t,n=0,a=3,Math.max(Math.min(t,a),n))},getHp:function(){return e},getMaxHp:function(){return 3},addBones:function(t){n=Math.max(n+t,0)},getBones:function(){return n}}};var g=function(){let l=0;const f=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],M=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){l+=t},render:function(t){const n=u;var a,e,o,s,h,i,r=t.getTransform(),c=(t.setTransform(1,0,0,1,0,0),t.scale(.8,.8),n.getMaxHp(),n.getHp());for(let t=0;t<n.getMaxHp();t++)t>=c?(f[0][0]="#555",f[3][0]="#555"):(f[0][0]="#e22",f[3][0]="#fff"),Y(f,50+55*t,72,0,0,0);Y(M,50,103,0,l,0),a=n.getBones(),e=70,o=105,s="#fff",h=30,i="left",x.fillStyle=s,x.textAlign=i,x.font=`bold ${h}px arial`,x.fillText(a,e,o),t.setTransform(r)},order:1e4}};var d=function(s,h){let i=0,r=0,c=s,l=h,f=p.width/1400,M=f;return n("player:hit",()=>r=.5),{update:function(t){i+=t;var n,a,e,o=b.player[0];o&&(n=o.playerHitbox.x,o=o.playerHitbox.y,{width:a,height:e}=p,e=e/6,n<s-(a=a/8)&&(c=n+a),s+a<n&&(c=n-a),o<h-e&&(l=o+e),h+.8*e<o&&(l=o-.8*e)),r=Math.max(r-t,0),s+=12*(c-s)*t,h+=12*(l-h)*t,M+=3*(f-M)*t},set:function(t){Math.cos(i),Math.cos(40*i),r,Math.cos(.8*i),Math.cos(23*i),r;p.width,p.height,t.translate(p.width/2,p.height/2),t.scale(M,M),t.translate(-s,-h)},order:-1e4,tags:["camera"]}};requestAnimationFrame(r),e(new d(150,400)),e(new t(150,400)),e(new a(500,439)),e(new o(300,300,0,0)),e(new g),e({tags:["physics"],physics:new v(0,440,0,0,800,100)}),e({tags:["physics"],physics:new v(650,100,0,0,100,340)}),e({tags:["physics"],physics:new v(250,340,0,0,100,100)}),e({tags:["physics"],physics:new v(800,440,0,0,300,100)}),e({tags:["physics"],physics:new v(1200,440,0,0,300,100)}),e({tags:["physics"],physics:new v(900,140,0,0,100,200)}),e({tags:["physics"],physics:new v(1300,140,0,0,100,300)}),e({tags:["physics"],physics:new v(1600,440,0,0,800,100)}),e({tags:["physics"],physics:new v(1950,100,0,0,100,340)}),e({tags:["physics"],physics:new v(1600,100,0,0,350,100)}),n("bone:spawn",([t,n,a])=>{for(;0<a--;)e(new o(t,n,400*(Math.random()-.5),300*-Math.random()-200))}),n("bone:collect",t=>u.addBones(t)),n("player:hit",t=>u.addHp(-t))})();</script></html>