<html><title>INFERNAL SIGIL</title><link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" sizes="64x64"/><style>canvas{width:100%;}body{overflow:none;background:#000;margin:0px;}</style><canvas/><script>(()=>{var c={};function a(t,a){(c[t]||(c[t]=[])).push(a)}function w(t,a){(c[t]||[]).map(t=>t(a))}var i=document.getElementsByTagName("canvas")[0],x=(i.width=1200,i.height=window.innerHeight*i.width/window.innerWidth,i.getContext("2d"));function Y(t,a){x.strokeStyle=t,x.fillStyle=a}function $(a,t,e,n,i,o,s=null){var r,h=x.getTransform(),c=(x.translate(t,e),x.rotate(o),Math.cos(i)),f=Math.sin(i);let M=n;for(let t=0;t<a.length;t++){var l=a[t];if(3==l.length)Y(l[0],s||l[0]),r=l[1],x.lineWidth=r,M=n+l[2];else{x.beginPath(),x.moveTo(l[0]*c-M*f,l[1]);for(let t=2;t<l.length;t+=2)x.lineTo(l[t]*c-M*f,l[t+1]);s&&x.fill(),x.stroke()}}x.setTransform(h)}x.lineJoin="round",x.lineCap="round";var o=[],v={},s=[],r=0;function h(t){const a=Math.min(.001*(t-r),.5);x.clearRect(0,0,i.width,i.height);var e,n=x.getTransform();x.translate(270,100),s.length=0,o.map(t=>{t.update?.(a)&&s.push(t)}),0<s.length&&(o=f(o,e=s),e.map(a=>{a.tags?.map(t=>{v[t]=f(v[t],[a])})})),o.map(t=>{t.render?.(x)}),requestAnimationFrame(h),r=t,x.setTransform(n)}function n(a){o.push(a),o.sort((t,a)=>t.order-a.order),a.tags?.map(t=>{v[t]=v[t]??[],v[t].push(a)})}function f(t,a){return t.filter(t=>!a.includes(t))}var y={};function M(t,a,e,n){return t<e+n&&e<t+a}function b(t,a,e,n){const i={set:(t,a,e,n)=>{i.x=t,i.y=a,i.w=e,i.h=n}};return i.isTouching=t=>{return a=i,t=t,a=M(a.x,a.w,t.x,t.w)&&M(a.y,a.h,t.y,t.h),x.beginPath(),x.lineWidth=2,x.strokeStyle="#fff",x.rect(t.x,t.y,t.w,t.h),x.stroke(),a;var a},i.set(t,a,e,n),i}window.onkeydown=t=>{y[t.code]||(y[t.code]=Date.now())},window.onkeyup=t=>{delete y[t.code]};var t=function(W,B){let D=0,F=0,S=0,s=0,K=1,r=1,q=0,C=0,R=0,h=0,Z=0,c=new b(W-14,B-55,28,50),E=0,f=0,M=0,J=0,L=2,N=2,l=1,u=!1,p=0,m=0,U=0,X=0,g=0,d=0;const j=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],z=[["#e22",9,0],[0,-37,0,-17],[0,-17,7,0],[0,-17,-7,0]],G=[["#e22",9,0],[4,0,14,6],["#def",3,0],[18,5,25,8],[15,9,22,13]],I=[["#e22",9,0],[0,-17,-16,-6,-26,-6,-32,-15,-34,-22]],O=[["#ee2",6,0],[0,0,-5,-5,0,-17,5,-5],["#e62",6,0],[0,0,0,-9]],Q=[["#e22",3,0],[0,0,-20,-10,-50,-5,-55,15,-25,6,-40,-5,-25,6,-20,-10,-25,6,0,4]],V="rgba(230,100,70,0.5)";return{update:function(t){D+=t,l=Math.min(l+t,1),L=Math.min(L+2*t,1),N=Math.min(N+2*t,1);var a=(y.ArrowLeft?-1:0)+(y.ArrowRight?1:0),e=(y.ArrowUp?1:0)+(y.ArrowDown?-1:0),n=Date.now()-y.KeyX<100;let i=!1,o=!1;v.physics.map(({physics:t})=>{if(c.isTouching(t)){if(B-16<t.y+t.h&&B-16>t.y){if(W-10<t.x)return W=t.x-13,void(0<K&&f<0&&(o=!0));if(W+10>t.x+t.w)return W=t.x+t.w+13,void(K<0&&f<0&&(o=!0))}B-45<t.y&&-10<=s&&(s=0,B=t.y+5.1,h=.15,m=0,i=!0),B-15>t.y+t.h&&(s<-100||3==d)&&(s=0,B=t.y+t.h+55)}}),3!=d?(.3<Math.abs(a)?(.2<l&&(S+=3e3*Math.sign(a)*t*Math.pow(1-C,6),D+=2*t,q+=4*(1-q)*t),r=Math.sign(a)):q+=4*(0-q)*t,(Math.sign(a)!=Math.sign(S)||l<.2)&&(S-=14*S*t),n&&.18<l&&p<3&&(u?L=0:N=0,p+=1,u=!u,l=0,J=1,S=850*r,s=.25*s-100,w("attack",[new b(W-50+50*r,B-50,100,50),r])),.55<l&&(p=0)):.3<Math.abs(e)?(a=Math.min(6*M,1),B-=370*Math.sign(e)*t*a,F+=18*t*e*a):(D+=t,F-=15*Math.sin(F)*t),Date.now()-y.KeyZ<100&&.15<g&&(3!=d?0<h?(s=-800,g=0):m<1&&(m+=1,U=1,s=-800,g=0):(s=-800,S=300*-K,f=.1,d=0,m=0,h=0,g=0,o=!1)),o?i&&3==d?d=0:(o&&!i&&.3<l||o&&i&&.3<e)&&(d=3,l=1,S=0):(3==d&&(.3<e||s<-10)&&(s=-518,S=300*K,f=.1),d=0),3==d?0<=s?(s-=20*s*t,F+=s/10*t):(s-=10*s*t,F+=-s/10*t):(l<.2?s+=1e3*t:(h<=.1||s<0)&&(!y.KeyZ&&s<0?s+=4e3*t:s+=2e3*t),M=0),v.enemy.map(({enemyHitbox:t})=>{c.isTouching(t)&&E<=0&&(E=1,l=0,S=1100*Math.sign(W-t.x-t.w/2),s=-100,w("player:hit",1))}),K+=15*(r-K)*t,E<=.7&&(S=Math.max(Math.min(S,400),-400)),s=Math.min(s,800),R+=17*(s-R)*t,Z+=17*((0<h?1:0)-Z)*t,C+=((3==d?1:0)-C)*(3==d?17:8)*t,J+=17*((l<.35?1:0)-J)*t,X+=17*(U-X)*t,B+=t*s,W+=t*S,h-=t,f-=t,M+=t,U=Math.max(U-(3==d?3*t:t),0),g+=t,E=Math.max(0,E-t),c.set(W-14,B-55,28,50)},render:function(t){var a=Math.sign(S)*Math.pow(Math.abs(S/400),.5),e=J,n=1-e,i=C,o=1-i,s=(1-Z)*o,r=1-s,h=q*o*n,c=(1-h)*o,f=X,M=1-f,l=1-Math.exp(6*-L),u=l-Math.pow(L/1.5,2),p=(P=1-Math.exp(6*-N))-Math.pow(N/1.5,2),m=6*D,g=(.7*-K+.2*Math.cos(2*D))*c+(-.6*a+.1*Math.cos(.5*m))*h+-.6*K*i,d=5*a+Math.min(5*Math.cos(1.5*F),0)*K*i+(0<K?15+35*u-40*u*u:-15*u)*e,y=-37*c*n+(-31-a)*h*n+(2*Math.sin(1.5*F)-39)*i+(0<K?10*u-40:-28)*e,w=-.5*h+-1.2*R/800*o*n+(.9-2*K)*i+(0<K?2.8*u-1.2:4*u-.9)*e,x=4*a*n+Math.min(5*Math.cos(1.5*F+3),0)*K*i+(0<K?15*p-3:-15-35*p+40*p*p)*e,v=-37*c*n+(a-31)*h*n+(-37-2*K+2*Math.sin(1.5*F+3))*i+(0<K?-28:10*p-40)*e,b=.5*h*n+1.2*R/800*o+(-1.5*K-1)*i+(0<K?.9-4*p:1.6-2.9*p)*e,T=10*(a*o*n+e*K)+K*i*6,k=-37*c*n+-23*(h*n+e)+-43*i,H=.3*g+.2*a+K*R/2e3*o+1.1*-K*i,u=g+(.15*Math.sin(1.2*F)-.2)*i+(.5*u-.5*p)*e,p=t.getTransform(),A=0<K?l:P,P=0<K?P:l;Y("#3af"),t.translate(W,B),K<0&&t.scale(-1,1),A<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.1,4*A-2.5,.5+A),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,-.2,4*A-2.5,.5+A),t.stroke()),t.setTransform(p),z[1][0]=10*a*n-7*i*K+15*e*K,z[1][1]=-37*c*n-23*(h*n+e)-35*i,z[2][2]=(7*c+(7*Math.cos(m)-4)*a)*r*o+(5+R/50)*s*K*o+(14*K+Math.min(7*Math.sin(-F),0))*i,z[2][3]=Math.min(7*Math.sin(m),0)*h*r*o+(-4-R/70)*s*o+(9*Math.cos(F)*K-8)*i,z[3][2]=(-7*c+(7*Math.cos(3.2+m)-4)*a)*r*o+(R/50-6)*s*K*o+(14*K+Math.min(7*Math.sin(3-F),0))*i,z[3][3]=Math.min(7*Math.sin(3.2+m),0)*h*r*o+(2-R/70)*s*o+(9*Math.cos(F+3)*K-8)*i,I[1][3]=+Math.cos(m)+31-37-R/50,I[1][5]=+Math.cos(1+m)+31-37-R/40,I[1][6]=-32-Math.abs(R/290),I[1][7]=2*Math.cos(2+m)+22-37-R/30,I[1][8]=R/70-34,I[1][9]=+Math.cos(3+m)+15-37-R/20,.1<E&&(t.globalAlpha=0<Math.cos(50*E)?.2:1),$(I,W,B-8,0,1.57+g+.3*g,0),$(O,W,B+I[1][9]-8,I[1][8],g+.3*g,.3*-a+.1*Math.cos(B/14)),0<K?$(G,W+d,B+y-1.5*Math.cos(3+m)+1,0,g,w):$(G,W+x,B+v-1.5*Math.cos(3+m)+1,0,3.14+g,b),t.fillStyle,$(Q,W-2,B-37+6*e,0,0*f+(.4*g+1.4)*M,-.7*M+R/2e3-f*f*4+2.8*U,V),$(Q,W+2,B-37+6*e,0,3.14*f+(.4*g+1.6)*M,.7*M+R/2e3+f*f*4.4-2.8*U,V),$(z,W,B-8,0,g,0),$(j,W+T,B+k+1.5*Math.cos(1+m)+1,10,u,H),0<K?$(G,W+x,B+v-1.5*Math.cos(3+m)+1,0,3.14+g,b):$(G,W+d,B+y-1.5*Math.cos(3+m)+1,0,g,w),t.globalAlpha=1,Y("#3af"),t.translate(W,B),K<0&&t.scale(-1,1),P<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.2,-P,3-4*P),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,.1,-P,3-4*P),t.stroke()),t.setTransform(p)},order:1e3,tags:["player"],playerHitbox:c}};var e=function(f,M,t){let l=0,n=0,i=0,o=1,u=1,p=0,s=3;const r=new b(0,0,0,0),m=[["#fff",5,0],[0,-13,4,-29,13,-40],[0,-16,-2,-17],[2,-22,-3,-24],[4,-28,0,-30],[6,-33,4,-35]],g=[["#fff",5,0],[-8,0,0,-13,8,0]],d=[["#fff",5,0],[0,0,14,15]],y=[["#fff",9,0],[3,10,-3,10,-3,0,-6,-4,0,-10,6,-4,3,0,3,10],["#000",4,5],[-5,-6,-3,-5],[5,-6,3,-5]];function h([t,a]){r.isTouching(t)&&(n=600*a,o=-Math.sign(a),p=1,--s)}return a("attack",h),{update:function(t){if(s<=0)return w("bone:spawn",[f,M-55,4]),e=h,c[a="attack"]=(c[a]||[]).filter(t=>t!=e),!0;var a,e;i+=1400*t,v.physics.map(({physics:t})=>{if(r.isTouching(t)){if(M-16<t.y+t.h&&M-16>t.y){if(f-10<t.x)return f=t.x-20,void(o=-1);if(f+10>t.x+t.w)return f=t.x+t.w+20,void(o=1)}M-45<t.y&&(i=0,M=t.y+.1),M-15>t.y+t.h&&(i<-100||3==state)&&(i=0,M=t.y+t.h+55)}}),p<=0&&(n=60*u,.98<Math.random&&(o=-o)),0<p&&(n-=12*n*t),l+=t,f+=n*t,M+=i*t,u+=8*(o-u)*t,p=Math.max(0,p-2*t),r.set(f-20,M-59,40,60)},render:function(t){var a=.6*u,e=6*l,n=t.getTransform(),i=(i=1.3,o=f,s=M,x.translate(o,s),x.scale(i,i),x.translate(-o,-s),Math.cos(e)/20*1-u*p*.3),o=7*a*1+50*i,s=0*(-33-2*a+Math.cos(e))+ +(-33-2*a+Math.cos(e-1)),r=7*a*1+50*i,h=0*(2*a-33+Math.cos(e))+ +(2*a-33+Math.cos(2+e)),c=+(-40+Math.cos(1+e));g[1][0]=8*Math.cos(e)*u*1,g[1][1]=4*Math.min(0,Math.sin(e))*1,g[1][4]=8*Math.cos(3+e)*u*1,g[1][5]=4*Math.min(0,Math.sin(3+e))*1,.2<p&&(t.globalAlpha=0<Math.cos(25*p)?.2:1),$(g,f,M,0,a,0),$(d,f+o,M+s,-4,2.1*a,-a/3),$(d,f+r,M+h,4,2.1*a+3.14,-a/3),$(m,f,M,0,2*a-1.57,i),$(y,f,M+c,23+70*i*u,-a,-p*u*.6),t.globalAlpha=1,t.setTransform(n)},order:500,tags:["enemy"],enemyHitbox:r}};var l=function(n,i,o,s){let r=7*Math.random(),h=7*Math.random();const c=new b(n,i,1,1),f=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){r+=t,s+=2e3*t;let a=!1,e=(v.physics.map(({physics:t})=>{if(c.isTouching(t)){if(i-16<t.y+t.h&&i-16>t.y){if(n-10<t.x)return n=t.x-15,o=-o,void(targetFacing=-1);if(n+10>t.x+t.w)return n=t.x+t.w+15,o=-o,void(targetFacing=1)}i-45<t.y&&(s=300<s?-.4*s:0,o*=.7,i=t.y-19.9,a=!0),i-15>t.y+t.h&&(s<-100||3==state)&&(s=0,i=t.y+t.h+20)}}),a&&(o-=9*o*t),!1);if(v.player.map(({playerHitbox:t})=>{c.isTouching(t)&&(e=!0)}),e)return w("bone:collect",1),!0;n+=o*t,i+=s*t,c.set(n-15,i-20,30,40)},render:function(t){var a=3*r,e=.2*Math.cos(r+h)+h;$(f,n,i,0,a,e)},collectHitbox:c}};var u=new function(){let a=0,n=3;return{addHp:function(t){var a,e;n=(t=n+t,a=0,e=3,Math.max(Math.min(t,e),a))},getHp:function(){return n},getMaxHp:function(){return 3},addBones:function(t){a=Math.max(a+t,0)},getBones:function(){return a}}};var p=function(){let a=0;const i=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]];return{update:function(t){a+=t},render:function(t){const a=u;var e=t.getTransform(),n=(t.setTransform(1,0,0,1,0,0),t.scale(.8,.8),a.getMaxHp(),a.getHp());for(let t=0;t<a.getMaxHp();t++)t>=n?(i[0][0]="#555",i[3][0]="#555"):(i[0][0]="#e22",i[3][0]="#fff"),$(i,50+50*t,72,0,0,0);t.setTransform(e)},order:1e4}};requestAnimationFrame(h),n(new t(150,400)),n(new e(500,439)),n(new l(300,300,0,0)),n(new p),n({tags:["physics"],physics:new b(0,440,800,100)}),n({tags:["physics"],physics:new b(650,100,100,340)}),n({tags:["physics"],physics:new b(250,340,100,100)}),a("bone:spawn",([t,a,e])=>{for(;0<e--;)n(new l(t,a,400*(Math.random()-.5),300*-Math.random()-200))}),a("bone:collect",t=>u.addBones(t)),a("player:hit",t=>u.addHp(-t))})();</script></html>