<html><title>INFERNAL SIGIL</title><link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" sizes="64x64"/><style>canvas{width:100%;}body{overflow:none;background:#000;margin:0px;}</style><canvas/><script>(()=>{var l={};function e(t,e){(l[t]||(l[t]=[])).push(e)}function w(t,e){(l[t]||[]).map(t=>t(e))}var o=document.getElementsByTagName("canvas")[0],x=(o.width=1200,o.height=window.innerHeight*o.width/window.innerWidth,o.getContext("2d"));function Q(t,e){x.strokeStyle=t,x.fillStyle=e}function V(e,t,n,a,o,s,r=null){var i,h=x.getTransform(),l=(x.translate(t,n),x.rotate(s),Math.cos(o)),c=Math.sin(o);let f=a;for(let t=0;t<e.length;t++){var M=e[t];if(3==M.length)Q(M[0],r||M[0]),i=M[1],x.lineWidth=i,f=a+M[2];else{x.beginPath(),x.moveTo(M[0]*l-f*c,M[1]);for(let t=2;t<M.length;t+=2)x.lineTo(M[t]*l-f*c,M[t+1]);r&&x.fill(),x.stroke()}}x.setTransform(h)}x.textBaseline="middle",x.lineJoin="round",x.lineCap="round";var s=[],b={},r=[],i=0;function h(t){const e=Math.min(.001*(t-i),.1);x.clearRect(0,0,o.width,o.height);var n,a=x.getTransform();x.translate(270,100),r.length=0,s.map(t=>{t.update?.(e)&&r.push(t)}),0<r.length&&(s=c(s,n=r),n.map(e=>{e.tags?.map(t=>{b[t]=c(b[t],[e])})})),s.map(t=>{t.render?.(x)}),requestAnimationFrame(h),i=t,x.setTransform(a)}function a(e){s.push(e),s.sort((t,e)=>t.order-e.order),e.tags?.map(t=>{b[t]=b[t]??[],b[t].push(e)})}function c(t,e){return t.filter(t=>!e.includes(t))}var v={};function f(t,e,n,a){return t<n+a&&n<t+e}function T(t,e,n,a,o,s){const r={set:(t,e,n,a,o,s)=>{r.x=t,r.y=e,r.ox=n,r.oy=a,r.w=o,r.h=s}};return r.isTouching=t=>{return e=r,t=t,n=f(e.x+e.ox,e.w,t.x+t.ox,t.w)&&f(e.y+e.oy,e.h,t.y+t.oy,t.h),x.beginPath(),x.lineWidth=2,x.strokeStyle=n?"#f0f":"#0f0",x.rect(t.x+t.ox,t.y+t.oy,t.w,t.h),x.rect(e.x+e.ox,e.y+e.oy,e.w,e.h),x.stroke(),n;var e,n},r.set(t,e,n,a,o,s),r}window.onkeydown=t=>{v[t.code]||(v[t.code]=Date.now())};var k=[0,0,!(window.onkeyup=t=>{delete v[t.code]}),!1,!1,!1];var t=function(W,B){let P=0,R=0,S=0,i=0,D=1,h=1,K=0,L=0,q=0,l=0,C=0,c=new T(W,B,-14,-55,28,50),F=0,f=0,M=0,G=0,Z=2,E=2,u=1,m=!1,p=0,g=0,J=0,N=0,d=0,y=0;const U=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],X=[["#e22",9,0],[0,-37,0,-17],[0,-17,7,0],[0,-17,-7,0]],$=[["#e22",9,0],[4,0,14,6],["#def",3,0],[18,5,25,8],[15,9,22,13]],j=[["#e22",9,0],[0,-17,-16,-6,-26,-6,-32,-15,-34,-22]],z=[["#ee2",6,0],[0,0,-5,-5,0,-17,5,-5],["#e62",6,0],[0,0,0,-9]],I=[["#e22",3,0],[0,0,-20,-10,-50,-5,-55,15,-25,6,-40,-5,-25,6,-20,-10,-25,6,0,4]],O="rgba(230,100,70,0.5)";return{update:function(t){P+=t,u=Math.min(u+t,1),Z=Math.min(Z+2*t,1),E=Math.min(E+2*t,1);var e=(v.ArrowLeft?-1:0)+(v.ArrowRight?1:0),n=(v.ArrowUp?1:0)+(v.ArrowDown?-1:0),a=Date.now()-v.KeyX<100;let o=!1,s=!1,r=!1;i<-100||y,b.physics.map(({physics:t})=>{[x_,y_,onGround_,onRightWall_,onLeftWall_,onRoof_]=function(t,e,n=!0){let a=t.x,o=t.y,s=!1,r=!1,i=!1,h=!1;return t.isTouching(e)&&(o-16<e.y+e.h&&o-16>e.y&&(a-10<e.x&&(a=e.x+e.ox-t.ox-t.w+.1,r=!0),a+10>e.x+e.w&&(a=e.x+e.ox+e.w-t.ox-.1,i=!0)),r||i||(o-45<e.y&&(o=e.y+e.oy-t.oy-t.h+.1,s=!0),o-15>e.y+e.h&&n&&(o=e.y+e.oy+e.h-t.oy,h=!0))),k[0]=a,k[1]=o,k[2]=s,k[3]=r,k[4]=i,k[5]=h,k}(c,t),W=x_,B=y_,o|=onGround_,s|=onRightWall_&&0<D||onLeftWall_&&D<0,r|=onRoof_,c.set(W,B,-14,-55,28,50)}),s&&0<=f&&(s=!1),o&&(i=0,l=.15,g=0,o=!0),r&&(i=0),3!=y?(.3<Math.abs(e)?(.2<u&&(S+=3e3*Math.sign(e)*t*Math.pow(1-L,6),P+=2*t,K+=4*(1-K)*t),h=Math.sign(e)):K+=4*(0-K)*t,(Math.sign(e)!=Math.sign(S)||u<.2)&&(S-=14*S*t),a&&.18<u&&p<3&&(m?Z=0:E=0,p+=1,m=!m,u=0,G=1,S=850*h,i=.25*i-100,w("attack",[new T(W,B,50*h-50,-50,100,50),h])),.55<u&&(p=0)):.3<Math.abs(n)?(e=Math.min(6*M,1),B-=370*Math.sign(n)*t*e,R+=18*t*n*e):(P+=t,R-=15*Math.sin(R)*t),Date.now()-v.KeyZ<100&&.15<d&&(3!=y?0<l?(i=-800,d=0):g<1&&(g+=1,J=1,i=-800,d=0):(i=-800,S=300*-D,f=.1,y=0,g=0,l=0,d=0,s=!1)),s?o&&3==y?y=0:(s&&!o&&.3<u||s&&o&&.3<n)&&(y=3,u=1,S=0):(3==y&&(.3<n||i<-.3)&&(i=-518,S=300*D,f=.1),y=0),3==y?0<=i?(i-=20*i*t,R+=i/10*t):(i-=10*i*t,R+=-i/10*t):(u<.2?i+=1e3*t:(l<=.1||i<0)&&(!v.KeyZ&&i<0?i+=4e3*t:i+=2e3*t),M=0),b.enemy.map(({enemyHitbox:t})=>{c.isTouching(t)&&F<=0&&(F=1,u=0,S=1100*Math.sign(W-t.x-t.w/2),i=-100,3==y&&(y=0,S=300*-h),w("player:hit",1))}),D+=15*(h-D)*t,F<=.7&&(S=Math.max(Math.min(S,400),-400)),i=Math.min(i,800),q+=17*(i-q)*t,C+=17*((0<l?1:0)-C)*t,L+=((3==y?1:0)-L)*(3==y?17:8)*t,G+=17*((u<.35?1:0)-G)*t,N+=17*(J-N)*t,B+=t*i,W+=t*S,l-=t,f-=t,M+=t,J=Math.max(J-(3==y?3*t:t),0),d+=t,F=Math.max(0,F-t),c.set(W,B,-14,-55,28,50)},render:function(t){var e=Math.sign(S)*Math.pow(Math.abs(S/400),.5),n=G,a=1-n,o=L,s=1-o,r=(1-C)*s,i=1-r,h=K*s*a,l=(1-h)*s,c=N,f=1-c,M=1-Math.exp(6*-Z),u=M-Math.pow(Z/1.5,2),m=(A=1-Math.exp(6*-E))-Math.pow(E/1.5,2),p=6*P,g=(.7*-D+.2*Math.cos(2*P))*l+(-.6*e+.1*Math.cos(.5*p))*h+-.6*D*o,d=5*e+Math.min(5*Math.cos(1.5*R),0)*D*o+(0<D?15+35*u-40*u*u:-15*u)*n,y=-37*l*a+(-31-e)*h*a+(2*Math.sin(1.5*R)-39)*o+(0<D?10*u-40:-28)*n,w=-.5*h+-1.2*q/800*s*a+(.9-2*D)*o+(0<D?2.8*u-1.2:4*u-.9)*n,x=4*e*a+Math.min(5*Math.cos(1.5*R+3),0)*D*o+(0<D?15*m-3:-15-35*m+40*m*m)*n,b=-37*l*a+(e-31)*h*a+(-37-2*D+2*Math.sin(1.5*R+3))*o+(0<D?-28:10*m-40)*n,v=.5*h*a+1.2*q/800*s+(-1.5*D-1)*o+(0<D?.9-4*m:1.6-2.9*m)*n,T=10*(e*s*a+n*D)+D*o*6,k=-37*l*a+-23*(h*a+n)+-43*o,H=.3*g+.2*e+D*q/2e3*s+1.1*-D*o,u=g+(.15*Math.sin(1.2*R)-.2)*o+(.5*u-.5*m)*n,m=t.getTransform(),_=0<D?M:A,A=0<D?A:M;Q("#3af"),t.translate(W,B),D<0&&t.scale(-1,1),_<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.1,4*_-2.5,.5+_),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,-.2,4*_-2.5,.5+_),t.stroke()),t.setTransform(m),X[1][0]=10*e*a-7*o*D+15*n*D,X[1][1]=-37*l*a-23*(h*a+n)-35*o,X[2][2]=(7*l+(7*Math.cos(p)-4)*e)*i*s+(5+q/50)*r*D*s+(14*D+Math.min(7*Math.sin(-R),0))*o,X[2][3]=Math.min(7*Math.sin(p),0)*h*i*s+(-4-q/70)*r*s+(9*Math.cos(R)*D-8)*o,X[3][2]=(-7*l+(7*Math.cos(3.2+p)-4)*e)*i*s+(q/50-6)*r*D*s+(14*D+Math.min(7*Math.sin(3-R),0))*o,X[3][3]=Math.min(7*Math.sin(3.2+p),0)*h*i*s+(2-q/70)*r*s+(9*Math.cos(R+3)*D-8)*o,j[1][3]=+Math.cos(p)+31-37-q/50,j[1][5]=+Math.cos(1+p)+31-37-q/40,j[1][6]=-32-Math.abs(q/290),j[1][7]=2*Math.cos(2+p)+22-37-q/30,j[1][8]=q/70-34,j[1][9]=+Math.cos(3+p)+15-37-q/20,.1<F&&(t.globalAlpha=0<Math.cos(50*F)?.2:1),V(j,W,B-8,0,1.57+g+.3*g,0),V(z,W,B+j[1][9]-8,j[1][8],g+.3*g,.3*-e+.1*Math.cos(B/14)),0<D?V($,W+d,B+y-1.5*Math.cos(3+p)+1,0,g,w):V($,W+x,B+b-1.5*Math.cos(3+p)+1,0,3.14+g,v),t.fillStyle,V(I,W-2,B-37+6*n,0,0*c+(.4*g+1.4)*f,-.7*f+q/2e3-c*c*4+2.8*J,O),V(I,W+2,B-37+6*n,0,3.14*c+(.4*g+1.6)*f,.7*f+q/2e3+c*c*4.4-2.8*J,O),V(X,W,B-8,0,g,0),V(U,W+T,B+k+1.5*Math.cos(1+p)+1,10,u,H),0<D?V($,W+x,B+b-1.5*Math.cos(3+p)+1,0,3.14+g,v):V($,W+d,B+y-1.5*Math.cos(3+p)+1,0,g,w),t.globalAlpha=1,Q("#3af"),t.translate(W,B),D<0&&t.scale(-1,1),A<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.2,-A,3-4*A),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,.1,-A,3-4*A),t.stroke()),t.setTransform(m)},order:1e3,tags:["player"],playerHitbox:c}};var n=function(c,f,t){let M=0,a=0,o=0,s=1,u=1,m=0,r=3;const i=new T(0,0,0,0,0,0),p=[["#fff",5,0],[0,-13,4,-29,13,-40],[0,-16,-2,-17],[2,-22,-3,-24],[4,-28,0,-30],[6,-33,4,-35]],g=[["#fff",5,0],[-8,0,0,-13,8,0]],d=[["#fff",5,0],[0,0,14,15]],y=[["#fff",9,0],[3,10,-3,10,-3,0,-6,-4,0,-10,6,-4,3,0,3,10],["#000",4,5],[-5,-6,-3,-5],[5,-6,3,-5]];function h([t,e]){i.isTouching(t)&&(a=600*e,s=-Math.sign(e),m=1,--r)}return e("attack",h),{update:function(t){if(r<=0)return w("bone:spawn",[c,f-55,4]),n=h,l[e="attack"]=(l[e]||[]).filter(t=>t!=n),!0;var e,n;o+=1400*t,m<=0&&(a=60*u,.98<Math.random&&(s=-s)),0<m&&(a-=12*a*t),M+=t,c+=a*t,f+=o*t,u+=8*(s-u)*t,m=Math.max(0,m-2*t),i.set(c,f,-20,-59,40,60)},render:function(t){var e=.6*u,n=6*M,a=t.getTransform(),o=(o=1.3,s=c,r=f,x.translate(s,r),x.scale(o,o),x.translate(-s,-r),Math.cos(n)/20*1-u*m*.3),s=7*e*1+50*o,r=0*(-33-2*e+Math.cos(n))+ +(-33-2*e+Math.cos(n-1)),i=7*e*1+50*o,h=0*(2*e-33+Math.cos(n))+ +(2*e-33+Math.cos(2+n)),l=+(-40+Math.cos(1+n));g[1][0]=8*Math.cos(n)*u*1,g[1][1]=4*Math.min(0,Math.sin(n))*1,g[1][4]=8*Math.cos(3+n)*u*1,g[1][5]=4*Math.min(0,Math.sin(3+n))*1,.2<m&&(t.globalAlpha=0<Math.cos(25*m)?.2:1),V(g,c,f,0,e,0),V(d,c+s,f+r,-4,2.1*e,-e/3),V(d,c+i,f+h,4,2.1*e+3.14,-e/3),V(p,c,f,0,2*e-1.57,o),V(y,c,f+l,23+70*o*u,-e,-m*u*.6),t.globalAlpha=1,t.setTransform(a)},order:500,tags:["enemy"],enemyHitbox:i}};var M=function(a,o,n,s){let r=7*Math.random(),i=7*Math.random();const h=new T(a,o,1,1),l=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){r+=t,s+=2e3*t;let e=!1;if(b.player.map(({playerHitbox:t})=>{h.isTouching(t)&&(e=!0)}),e)return w("bone:collect",1),!0;a+=n*t,o+=s*t,h.set(a,o,-15,-20,30,40)},render:function(t){var e=3*r,n=.2*Math.cos(r+i)+i;V(l,a,o,0,e,n)},collectHitbox:h}};var u=new function(){let e=0,a=3;return{addHp:function(t){var e,n;a=(t=a+t,e=0,n=3,Math.max(Math.min(t,n),e))},getHp:function(){return a},getMaxHp:function(){return 3},addBones:function(t){e=Math.max(e+t,0)},getBones:function(){return e}}};var m=function(){let c=0;const f=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],M=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){c+=t},render:function(t){const e=u;var n,a,o,s,r,i,h=t.getTransform(),l=(t.setTransform(1,0,0,1,0,0),t.scale(.8,.8),e.getMaxHp(),e.getHp());for(let t=0;t<e.getMaxHp();t++)t>=l?(f[0][0]="#555",f[3][0]="#555"):(f[0][0]="#e22",f[3][0]="#fff"),V(f,50+55*t,72,0,0,0);V(M,50,103,0,c,0),n=e.getBones(),a=70,o=105,s="#fff",r=30,i="left",x.fillStyle=s,x.textAlign=i,x.font=`bold ${r}px arial`,x.fillText(n,a,o),t.setTransform(h)},order:1e4}};requestAnimationFrame(h),a(new t(150,400)),a(new n(500,439)),a(new M(300,300,0,0)),a(new m),a({tags:["physics"],physics:new T(0,440,0,0,800,100)}),a({tags:["physics"],physics:new T(350,100,0,0,100,340)}),a({tags:["physics"],physics:new T(0,100,0,0,350,100)}),e("bone:spawn",([t,e,n])=>{for(;0<n--;)a(new M(t,e,400*(Math.random()-.5),300*-Math.random()-200))}),e("bone:collect",t=>u.addBones(t)),e("player:hit",t=>u.addHp(-t))})();</script></html>