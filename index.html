<html><title>INFERNAL SIGIL</title><link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" sizes="64x64"/><style>canvas{width:100%;}body{overflow:none;background:#000;margin:0px;}</style><canvas/><script>(()=>{var l={};function n(t,n){(l[t]||(l[t]=[])).push(n)}function w(t,n){(l[t]||[]).map(t=>t(n))}var o=document.getElementsByTagName("canvas")[0],x=(o.width=1200,o.height=window.innerHeight*o.width/window.innerWidth,o.getContext("2d"));function V(t,n){x.strokeStyle=t,x.fillStyle=n}function Y(n,t,e,a,o,r,s=null){var i,h=x.getTransform(),l=(x.translate(t,e),x.rotate(r),Math.cos(o)),c=Math.sin(o);let f=a;for(let t=0;t<n.length;t++){var M=n[t];if(3==M.length)V(M[0],s||M[0]),i=M[1],x.lineWidth=i,f=a+M[2];else{x.beginPath(),x.moveTo(M[0]*l-f*c,M[1]);for(let t=2;t<M.length;t+=2)x.lineTo(M[t]*l-f*c,M[t+1]);s&&x.fill(),x.stroke()}}x.setTransform(h)}x.textBaseline="middle",x.lineJoin="round",x.lineCap="round";var r=[],b={},s=[],i=0;function h(t){const n=Math.min(.001*(t-i),.1);x.clearRect(0,0,o.width,o.height);var e,a=x.getTransform();x.translate(270,100),s.length=0,r.map(t=>{t.update?.(n)&&s.push(t)}),0<s.length&&(r=c(r,e=s),e.map(n=>{n.tags?.map(t=>{b[t]=c(b[t],[n])})})),r.map(t=>{t.render?.(x)}),requestAnimationFrame(h),i=t,x.setTransform(a)}function a(n){r.push(n),r.sort((t,n)=>t.order-n.order),n.tags?.map(t=>{b[t]=b[t]??[],b[t].push(n)})}function c(t,n){return t.filter(t=>!n.includes(t))}var g={};function f(t,n,e,a){return t<e+a&&e<t+n}function v(t,n,e,a,o,r){const s={set:(t,n,e,a,o,r)=>{s.x=t,s.y=n,s.ox=e,s.oy=a,s.w=o,s.h=r}};return s.isTouching=t=>{return n=s,t=t,e=f(n.x+n.ox,n.w,t.x+t.ox,t.w)&&f(n.y+n.oy,n.h,t.y+t.oy,t.h),x.beginPath(),x.lineWidth=2,x.strokeStyle=e?"#f0f":"#0f0",x.rect(t.x+t.ox,t.y+t.oy,t.w,t.h),x.rect(n.x+n.ox,n.y+n.oy,n.w,n.h),x.stroke(),e;var n,e},s.set(t,n,e,a,o,r),s}window.onkeydown=t=>{g[t.code]||(g[t.code]=Date.now())};var y=[0,0,!(window.onkeyup=t=>{delete g[t.code]}),!1,!1,!1];var t=function(B,G){let P=0,R=0,S=0,r=0,D=1,s=1,K=0,L=0,q=0,i=0,C=0,h=new v(B,G,-14,-55,28,50),F=0,l=0,c=0,Z=0,E=2,J=2,f=1,M=!1,u=0,m=0,N=0,U=0,p=0,d=0;const X=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],$=[["#e22",9,0],[0,-37,0,-17],[0,-17,7,0],[0,-17,-7,0]],j=[["#e22",9,0],[4,0,14,6],["#def",3,0],[18,5,25,8],[15,9,22,13]],z=[["#e22",9,0],[0,-17,-16,-6,-26,-6,-32,-15,-34,-22]],I=[["#ee2",6,0],[0,0,-5,-5,0,-17,5,-5],["#e62",6,0],[0,0,0,-9]],O=[["#e22",3,0],[0,0,-20,-10,-50,-5,-55,15,-25,6,-40,-5,-25,6,-20,-10,-25,6,0,4]],Q="rgba(230,100,70,0.5)";return{update:function(t){P+=t,f=Math.min(f+t,1),E=Math.min(E+2*t,1),J=Math.min(J+2*t,1);var n=(g.ArrowLeft?-1:0)+(g.ArrowRight?1:0),e=(g.ArrowUp?1:0)+(g.ArrowDown?-1:0),a=Date.now()-g.KeyX<100;[B,G,onGround,onRightWall,onLeftWall,onRoof]=function(t,n){let e=n.x,a=n.y,o=!1,r=!1,s=!1,i=!1;return t.map(({physics:t})=>{n.isTouching(t)&&(a-16<t.y+t.h&&a-16>t.y&&(e-10<t.x&&(e=t.x+t.ox-n.ox-n.w+.1,r=!0),e+10>t.x+t.w&&(e=t.x+t.ox+t.w-n.ox-.1,s=!0)),r||s||(a-45<t.y&&(a=t.y+t.oy-n.oy-n.h+.1,o=!0),a-15>t.y+t.h&&(a=t.y+t.oy+t.h-n.oy,i=!0)),n.x=e,n.y=a)}),y[0]=e,y[1]=a,y[2]=o,y[3]=r,y[4]=s,y[5]=i,y}(b.physics,h);let o=onRightWall&&0<D||onLeftWall&&D<0;o&&0<=l&&(o=!1),onGround&&(r=0,i=.15,m=0,onGround=!0),onRoof&&(r=0),3!=d?(.3<Math.abs(n)?(.2<f&&(S+=3e3*Math.sign(n)*t*Math.pow(1-L,6),P+=2*t,K+=4*(1-K)*t),s=Math.sign(n)):K+=4*(0-K)*t,(Math.sign(n)!=Math.sign(S)||f<.2)&&(S-=14*S*t),a&&.18<f&&u<3&&(M?E=0:J=0,u+=1,M=!M,f=0,Z=1,S=850*s,r=.25*r-100,w("attack",[new v(B,G,50*s-50,-50,100,50),s])),.55<f&&(u=0)):.3<Math.abs(e)?(n=Math.min(6*c,1),G-=370*Math.sign(e)*t*n,R+=18*t*e*n):(P+=t,R-=15*Math.sin(R)*t),Date.now()-g.KeyZ<100&&.15<p&&(3!=d?0<i?(r=-800,p=0):m<1&&(m+=1,N=1,r=-800,p=0):(r=-800,S=300*-D,l=.1,d=0,m=0,i=0,p=0,o=!1)),o?onGround&&3==d?d=0:(o&&!onGround&&.3<f||o&&onGround&&.3<e)&&(d=3,f=1,S=0):(3==d&&(.3<e||r<-.3)&&(r=-518,S=300*D,l=.1),d=0),3==d?0<=r?(r-=20*r*t,R+=r/10*t):(r-=10*r*t,R+=-r/10*t):(f<.2?r+=1e3*t:(i<=.1||r<0)&&(!g.KeyZ&&r<0?r+=4e3*t:r+=2e3*t),c=0),b.enemy.map(({enemyHitbox:t})=>{h.isTouching(t)&&F<=0&&(F=1,f=0,S=1100*Math.sign(B-t.x-t.w/2),r=-100,3==d&&(d=0,S=300*-s),w("player:hit",1))}),D+=15*(s-D)*t,F<=.7&&(S=Math.max(Math.min(S,400),-400)),r=Math.min(r,800),q+=17*(r-q)*t,C+=17*((0<i?1:0)-C)*t,L+=((3==d?1:0)-L)*(3==d?17:8)*t,Z+=17*((f<.35?1:0)-Z)*t,U+=17*(N-U)*t,G+=t*r,B+=t*S,i-=t,l-=t,c+=t,N=Math.max(N-(3==d?3*t:t),0),p+=t,F=Math.max(0,F-t),h.set(B,G,-14,-55,28,50)},render:function(t){var n=Math.sign(S)*Math.pow(Math.abs(S/400),.5),e=Z,a=1-e,o=L,r=1-o,s=(1-C)*r,i=1-s,h=K*r*a,l=(1-h)*r,c=U,f=1-c,M=1-Math.exp(6*-E),u=M-Math.pow(E/1.5,2),m=(W=1-Math.exp(6*-J))-Math.pow(J/1.5,2),p=6*P,d=(.7*-D+.2*Math.cos(2*P))*l+(-.6*n+.1*Math.cos(.5*p))*h+-.6*D*o,g=5*n+Math.min(5*Math.cos(1.5*R),0)*D*o+(0<D?15+35*u-40*u*u:-15*u)*e,y=-37*l*a+(-31-n)*h*a+(2*Math.sin(1.5*R)-39)*o+(0<D?10*u-40:-28)*e,w=-.5*h+-1.2*q/800*r*a+(.9-2*D)*o+(0<D?2.8*u-1.2:4*u-.9)*e,x=4*n*a+Math.min(5*Math.cos(1.5*R+3),0)*D*o+(0<D?15*m-3:-15-35*m+40*m*m)*e,b=-37*l*a+(n-31)*h*a+(-37-2*D+2*Math.sin(1.5*R+3))*o+(0<D?-28:10*m-40)*e,v=.5*h*a+1.2*q/800*r+(-1.5*D-1)*o+(0<D?.9-4*m:1.6-2.9*m)*e,T=10*(n*r*a+e*D)+D*o*6,k=-37*l*a+-23*(h*a+e)+-43*o,H=.3*d+.2*n+D*q/2e3*r+1.1*-D*o,u=d+(.15*Math.sin(1.2*R)-.2)*o+(.5*u-.5*m)*e,m=t.getTransform(),A=0<D?M:W,W=0<D?W:M;V("#3af"),t.translate(B,G),D<0&&t.scale(-1,1),A<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.1,4*A-2.5,.5+A),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,-.2,4*A-2.5,.5+A),t.stroke()),t.setTransform(m),$[1][0]=10*n*a-7*o*D+15*e*D,$[1][1]=-37*l*a-23*(h*a+e)-35*o,$[2][2]=(7*l+(7*Math.cos(p)-4)*n)*i*r+(5+q/50)*s*D*r+(14*D+Math.min(7*Math.sin(-R),0))*o,$[2][3]=Math.min(7*Math.sin(p),0)*h*i*r+(-4-q/70)*s*r+(9*Math.cos(R)*D-8)*o,$[3][2]=(-7*l+(7*Math.cos(3.2+p)-4)*n)*i*r+(q/50-6)*s*D*r+(14*D+Math.min(7*Math.sin(3-R),0))*o,$[3][3]=Math.min(7*Math.sin(3.2+p),0)*h*i*r+(2-q/70)*s*r+(9*Math.cos(R+3)*D-8)*o,z[1][3]=+Math.cos(p)+31-37-q/50,z[1][5]=+Math.cos(1+p)+31-37-q/40,z[1][6]=-32-Math.abs(q/290),z[1][7]=2*Math.cos(2+p)+22-37-q/30,z[1][8]=q/70-34,z[1][9]=+Math.cos(3+p)+15-37-q/20,.1<F&&(t.globalAlpha=0<Math.cos(50*F)?.2:1),Y(z,B,G-8,0,1.57+d+.3*d,0),Y(I,B,G+z[1][9]-8,z[1][8],d+.3*d,.3*-n+.1*Math.cos(G/14)),0<D?Y(j,B+g,G+y-1.5*Math.cos(3+p)+1,0,d,w):Y(j,B+x,G+b-1.5*Math.cos(3+p)+1,0,3.14+d,v),t.fillStyle,Y(O,B-2,G-37+6*e,0,0*c+(.4*d+1.4)*f,-.7*f+q/2e3-c*c*4+2.8*N,Q),Y(O,B+2,G-37+6*e,0,3.14*c+(.4*d+1.6)*f,.7*f+q/2e3+c*c*4.4-2.8*N,Q),Y($,B,G-8,0,d,0),Y(X,B+T,G+k+1.5*Math.cos(1+p)+1,10,u,H),0<D?Y(j,B+x,G+b-1.5*Math.cos(3+p)+1,0,3.14+d,v):Y(j,B+g,G+y-1.5*Math.cos(3+p)+1,0,d,w),t.globalAlpha=1,V("#3af"),t.translate(B,G),D<0&&t.scale(-1,1),W<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.2,-W,3-4*W),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,.1,-W,3-4*W),t.stroke()),t.setTransform(m)},order:1e3,tags:["player"],playerHitbox:h}};var e=function(c,f,t){let M=0,a=0,o=0,r=1,u=1,m=0,s=3;const i=new v(0,0,0,0,0,0),p=[["#fff",5,0],[0,-13,4,-29,13,-40],[0,-16,-2,-17],[2,-22,-3,-24],[4,-28,0,-30],[6,-33,4,-35]],d=[["#fff",5,0],[-8,0,0,-13,8,0]],g=[["#fff",5,0],[0,0,14,15]],y=[["#fff",9,0],[3,10,-3,10,-3,0,-6,-4,0,-10,6,-4,3,0,3,10],["#000",4,5],[-5,-6,-3,-5],[5,-6,3,-5]];function h([t,n]){i.isTouching(t)&&(a=600*n,r=-Math.sign(n),m=1,--s)}return n("attack",h),{update:function(t){if(s<=0)return w("bone:spawn",[c,f-55,4]),e=h,l[n="attack"]=(l[n]||[]).filter(t=>t!=e),!0;var n,e;o+=1400*t,b.physics.map(({})=>{}),m<=0&&(a=60*u,.98<Math.random&&(r=-r)),0<m&&(a-=12*a*t),M+=t,c+=a*t,f+=o*t,u+=8*(r-u)*t,m=Math.max(0,m-2*t),i.set(c,f,-20,-59,40,60)},render:function(t){var n=.6*u,e=6*M,a=t.getTransform(),o=(o=1.3,r=c,s=f,x.translate(r,s),x.scale(o,o),x.translate(-r,-s),Math.cos(e)/20*1-u*m*.3),r=7*n*1+50*o,s=0*(-33-2*n+Math.cos(e))+ +(-33-2*n+Math.cos(e-1)),i=7*n*1+50*o,h=0*(2*n-33+Math.cos(e))+ +(2*n-33+Math.cos(2+e)),l=+(-40+Math.cos(1+e));d[1][0]=8*Math.cos(e)*u*1,d[1][1]=4*Math.min(0,Math.sin(e))*1,d[1][4]=8*Math.cos(3+e)*u*1,d[1][5]=4*Math.min(0,Math.sin(3+e))*1,.2<m&&(t.globalAlpha=0<Math.cos(25*m)?.2:1),Y(d,c,f,0,n,0),Y(g,c+r,f+s,-4,2.1*n,-n/3),Y(g,c+i,f+h,4,2.1*n+3.14,-n/3),Y(p,c,f,0,2*n-1.57,o),Y(y,c,f+l,23+70*o*u,-n,-m*u*.6),t.globalAlpha=1,t.setTransform(a)},order:500,tags:["enemy"],enemyHitbox:i}};var M=function(a,o,e,r){let s=7*Math.random(),i=7*Math.random();const h=new v(a,o,1,1),l=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){s+=t,r+=2e3*t;let n=!1;if(b.player.map(({playerHitbox:t})=>{h.isTouching(t)&&(n=!0)}),n)return w("bone:collect",1),!0;a+=e*t,o+=r*t,h.set(a,o,-15,-20,30,40)},render:function(t){var n=3*s,e=.2*Math.cos(s+i)+i;Y(l,a,o,0,n,e)},collectHitbox:h}};var u=new function(){let n=0,a=3;return{addHp:function(t){var n,e;a=(t=a+t,n=0,e=3,Math.max(Math.min(t,e),n))},getHp:function(){return a},getMaxHp:function(){return 3},addBones:function(t){n=Math.max(n+t,0)},getBones:function(){return n}}};var m=function(){let c=0;const f=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],M=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){c+=t},render:function(t){const n=u;var e,a,o,r,s,i,h=t.getTransform(),l=(t.setTransform(1,0,0,1,0,0),t.scale(.8,.8),n.getMaxHp(),n.getHp());for(let t=0;t<n.getMaxHp();t++)t>=l?(f[0][0]="#555",f[3][0]="#555"):(f[0][0]="#e22",f[3][0]="#fff"),Y(f,50+55*t,72,0,0,0);Y(M,50,103,0,c,0),e=n.getBones(),a=70,o=105,r="#fff",s=30,i="left",x.fillStyle=r,x.textAlign=i,x.font=`bold ${s}px arial`,x.fillText(e,a,o),t.setTransform(h)},order:1e4}};requestAnimationFrame(h),a(new t(150,400)),a(new e(500,439)),a(new M(300,300,0,0)),a(new m),a({tags:["physics"],physics:new v(0,440,0,0,800,100)}),a({tags:["physics"],physics:new v(650,100,0,0,100,340)}),a({tags:["physics"],physics:new v(250,340,0,0,100,100)}),n("bone:spawn",([t,n,e])=>{for(;0<e--;)a(new M(t,n,400*(Math.random()-.5),300*-Math.random()-200))}),n("bone:collect",t=>u.addBones(t)),n("player:hit",t=>u.addHp(-t))})();</script></html>