<html><title>INFERNAL SIGIL</title><link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" sizes="64x64"/><style>canvas{width:100%;}body{overflow:none;background:#000;margin:0px;}</style><canvas/><script>(()=>{var l={};function n(t,n){(l[t]||(l[t]=[])).push(n)}function w(t,n){(l[t]||[]).map(t=>t(n))}var c=document.getElementsByTagName("canvas")[0],x=(c.width=1200,c.height=window.innerHeight*c.width/window.innerWidth,c.getContext("2d"));function V(t,n){x.strokeStyle=t,x.fillStyle=n||t}function Y(n,t,a,e,o,r,h=null){var i,s=x.getTransform(),l=(x.translate(t,a),x.rotate(r),Math.cos(o)),c=Math.sin(o);let f=e;for(let t=0;t<n.length;t++){var M=n[t];if(3==M.length)V(M[0],h||M[0]),i=M[1],x.lineWidth=i,f=e+M[2];else{x.beginPath(),x.moveTo(M[0]*l-f*c,M[1]);for(let t=2;t<M.length;t+=2)x.lineTo(M[t]*l-f*c,M[t+1]);h&&x.fill(),x.stroke()}}x.setTransform(s)}x.textBaseline="middle",x.lineJoin="round",x.lineCap="round";var r=[],b={},h=[],i=0;function s(t){const n=Math.min(.001*(t-i),.1);x.clearRect(0,0,c.width,c.height);var a,e=x.getTransform();const o=b.camera[0];o.set(x),h.length=0,r.map(t=>{t.update?.(n)&&h.push(t)}),0<h.length&&(r=f(r,a=h),a.map(n=>{n.tags?.map(t=>{b[t]=f(b[t],[n])})})),r.map(t=>{t.render?.(x)}),requestAnimationFrame(s),i=t,x.setTransform(e)}function e(n){r.push(n),r.sort((t,n)=>t.order-n.order),n.tags?.map(t=>{b[t]=b[t]??[],b[t].push(n)})}function f(t,n){return t.filter(t=>!n.includes(t))}var m={};function M(t,n,a,e){return t<a+e&&a<t+n}function v(t,n,a,e,o,r){const h={set:(t,n,a,e,o,r)=>{h.x=t,h.y=n,h.ox=a,h.oy=e,h.w=o,h.h=r}};return h.isTouching=t=>{return n=h,t=t,n=M(n.x+n.ox,n.w,t.x+t.ox,t.w)&&M(n.y+n.oy,n.h,t.y+t.oy,t.h),x.beginPath(),x.lineWidth=2,x.strokeStyle="#fff",x.rect(t.x+t.ox,t.y+t.oy,t.w,t.h),x.stroke(),n;var n},h.set(t,n,a,e,o,r),h}window.onkeydown=t=>{m[t.code]||(m[t.code]=Date.now())};var u=[0,0,!(window.onkeyup=t=>{delete m[t.code]}),!1,!1,!1];function T(t,n){let a=n.x,e=n.y,o=!1,r=!1,h=!1,i=!1;return t.map(({physics:t})=>{n.isTouching(t)&&(e-16<t.y+t.h&&e-16>t.y&&(a-10<t.x&&(a=t.x+t.ox-n.ox-n.w+.1,r=!0),a+10>t.x+t.w&&(a=t.x+t.ox+t.w-n.ox-.1,h=!0)),r||h||(e-45<t.y&&(e=t.y+t.oy-n.oy-n.h+.1,o=!0),e-15>t.y+t.h&&(e=t.y+t.oy+t.h-n.oy,i=!0)),n.x=a,n.y=e)}),u[0]=a,u[1]=e,u[2]=o,u[3]=r,u[4]=h,u[5]=i,u}var t=function(A,G){let L=0,P=0,B=0,r=0,S=1,h=1,D=0,K=0,q=0,i=0,C=0,s=new v(A,G,-14,-55,28,50),F=0,l=0,c=0,Z=0,$=2,E=2,f=1,M=!1,u=0,d=0,J=0,N=0,g=0,p=0;const U=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],X=[["#e22",9,0],[0,-37,0,-17],[0,-17,7,0],[0,-17,-7,0]],j=[["#e22",9,0],[4,0,14,6],["#def",3,0],[18,5,25,8],[15,9,22,13]],z=[["#e22",9,0],[0,-17,-16,-6,-26,-6,-32,-15,-34,-22]],I=[["#ee2",6,0],[0,0,-5,-5,0,-17,5,-5],["#e62",6,0],[0,0,0,-9]],O=[["#e22",3,0],[0,0,-20,-10,-50,-5,-55,15,-25,6,-40,-5,-25,6,-20,-10,-25,6,0,4]],Q="rgba(230,100,70,0.5)";return{update:function(t){L+=t,f=Math.min(f+t,1),$=Math.min($+2*t,1),E=Math.min(E+2*t,1);var n=(m.ArrowLeft?-1:0)+(m.ArrowRight?1:0),a=(m.ArrowUp?1:0)+(m.ArrowDown?-1:0),e=Date.now()-m.KeyX<100;[A,G,onGround,onRightWall,onLeftWall,onRoof]=T(b.physics,s);let o=onRightWall&&0<S||onLeftWall&&S<0;o&&0<=l&&(o=!1),onGround&&(r=0,i=.15,d=0,onGround=!0),onRoof&&(r=0),3!=p?(.3<Math.abs(n)?(.2<f&&(B+=3e3*Math.sign(n)*t*Math.pow(1-K,6),L+=2*t,D+=4*(1-D)*t),h=Math.sign(n)):D+=4*(0-D)*t,(Math.sign(n)!=Math.sign(B)||f<.2)&&(B-=14*B*t),e&&.18<f&&u<3&&(M?$=0:E=0,u+=1,M=!M,f=0,Z=1,B=850*h,r=.25*r-100,w("attack",[new v(A,G,50*h-50,-50,100,50),h])),.4<f&&(u=0)):.3<Math.abs(a)?(n=Math.min(6*c,1),G-=370*Math.sign(a)*t*n,P+=18*t*a*n):(L+=t,P-=15*Math.sin(P)*t),Date.now()-m.KeyZ<100&&.15<g&&(3!=p?0<i?(r=-800,g=0):d<1&&(d+=1,J=1,r=-800,g=0):(r=-800,B=300*-S,l=.1,p=0,d=0,i=0,g=0,o=!1)),o?onGround&&3==p?p=0:(o&&!onGround&&.3<f||o&&onGround&&.3<a)&&(p=3,f=1,B=0):(3==p&&(.3<a||r<-.3)&&(r=-518,B=300*S,l=.1),p=0),3==p?0<=r?(r-=20*r*t,P+=r/10*t):(r-=10*r*t,P+=-r/10*t):(f<.2?r+=1e3*t:(i<=.1||r<0)&&(!m.KeyZ&&r<0?r+=4e3*t:r+=2e3*t),c=0),b.enemy.map(({enemyHitbox:t})=>{s.isTouching(t)&&F<=0&&(F=1,f=0,B=1100*Math.sign(A-t.x-t.w/2),r=-100,3==p&&(p=0,B=300*-h),w("player:hit",1))}),S+=15*(h-S)*t,F<=.7&&(B=Math.max(Math.min(B,400),-400)),r=Math.min(r,800),q+=17*(r-q)*t,C+=17*((0<i?1:0)-C)*t,K+=((3==p?1:0)-K)*(3==p?17:8)*t,Z+=17*((f<.35?1:0)-Z)*t,N+=17*(J-N)*t,G+=t*r,A+=t*B,i-=t,l-=t,c+=t,J=Math.max(J-(3==p?3*t:t),0),g+=t,F=Math.max(0,F-t),s.set(A,G,-14,-55,28,50)},render:function(t){var n=Math.sign(B)*Math.pow(Math.abs(B/400),.5),a=Z,e=1-a,o=K,r=1-o,h=(1-C)*r,i=1-h,s=D*r*e,l=(1-s)*r,c=N,f=1-c,M=1-Math.exp(6*-$),u=M-Math.pow($/1.5,2),d=(k=1-Math.exp(6*-E))-Math.pow(E/1.5,2),g=6*L,p=(.7*-S+.2*Math.cos(2*L))*l+(-.6*n+.1*Math.cos(.5*g))*s+-.6*S*o,m=5*n+Math.min(5*Math.cos(1.5*P),0)*S*o+(0<S?15+35*u-40*u*u:-15*u)*a,y=-37*l*e+(-31-n)*s*e+(2*Math.sin(1.5*P)-39)*o+(0<S?10*u-40:-28)*a,w=-.5*s+-1.2*q/800*r*e+(.9-2*S)*o+(0<S?2.8*u-1.2:4*u-.9)*a,x=4*n*e+Math.min(5*Math.cos(1.5*P+3),0)*S*o+(0<S?15*d-3:-15-35*d+40*d*d)*a,b=-37*l*e+(n-31)*s*e+(-37-2*S+2*Math.sin(1.5*P+3))*o+(0<S?-28:10*d-40)*a,v=.5*s*e+1.2*q/800*r+(-1.5*S-1)*o+(0<S?.9-4*d:1.6-2.9*d)*a,T=10*(n*r*e+a*S)+S*o*6,W=-37*l*e+-23*(s*e+a)+-43*o,H=.3*p+.2*n+S*q/2e3*r+1.1*-S*o,u=p+(.15*Math.sin(1.2*P)-.2)*o+(.5*u-.5*d)*a,d=t.getTransform(),R=0<S?M:k,k=0<S?k:M;V("#3af"),t.translate(A,G),S<0&&t.scale(-1,1),R<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.1,4*R-2.5,.5+R),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,-.2,4*R-2.5,.5+R),t.stroke()),t.setTransform(d),X[1][0]=10*n*e-7*o*S+15*a*S,X[1][1]=-37*l*e-23*(s*e+a)-35*o,X[2][2]=(7*l+(7*Math.cos(g)-4)*n)*i*r+(5+q/50)*h*S*r+(14*S+Math.min(7*Math.sin(-P),0))*o,X[2][3]=Math.min(7*Math.sin(g),0)*s*i*r+(-4-q/70)*h*r+(9*Math.cos(P)*S-8)*o,X[3][2]=(-7*l+(7*Math.cos(3.2+g)-4)*n)*i*r+(q/50-6)*h*S*r+(14*S+Math.min(7*Math.sin(3-P),0))*o,X[3][3]=Math.min(7*Math.sin(3.2+g),0)*s*i*r+(2-q/70)*h*r+(9*Math.cos(P+3)*S-8)*o,z[1][3]=+Math.cos(g)+31-37-q/50,z[1][5]=+Math.cos(1+g)+31-37-q/40,z[1][6]=-32-Math.abs(q/290),z[1][7]=2*Math.cos(2+g)+22-37-q/30,z[1][8]=q/70-34,z[1][9]=+Math.cos(3+g)+15-37-q/20,.1<F&&(t.globalAlpha=0<Math.cos(50*F)?.2:1),Y(z,A,G-8,0,1.57+p+.3*p,0),Y(I,A,G+z[1][9]-8,z[1][8],p+.3*p,.3*-n+.1*Math.cos(G/14)),0<S?Y(j,A+m,G+y-1.5*Math.cos(3+g)+1,0,p,w):Y(j,A+x,G+b-1.5*Math.cos(3+g)+1,0,3.14+p,v),t.fillStyle,Y(O,A-2,G-37+6*a,0,0*c+(.4*p+1.4)*f,-.7*f+q/2e3-c*c*4+2.8*J,Q),Y(O,A+2,G-37+6*a,0,3.14*c+(.4*p+1.6)*f,.7*f+q/2e3+c*c*4.4-2.8*J,Q),Y(X,A,G-8,0,p,0),Y(U,A+T,G+W+1.5*Math.cos(1+g)+1,10,u,H),0<S?Y(j,A+x,G+b-1.5*Math.cos(3+g)+1,0,3.14+p,v):Y(j,A+m,G+y-1.5*Math.cos(3+g)+1,0,p,w),t.globalAlpha=1,V("#3af"),t.translate(A,G),S<0&&t.scale(-1,1),k<.95&&(t.lineWidth=4,t.beginPath(),t.ellipse(5,-25,80,20,.2,-k,3-4*k),t.stroke(),t.beginPath(),t.ellipse(5,-25,70,30,.1,-k,3-4*k),t.stroke()),t.setTransform(d)},order:1e3,tags:["player"],playerHitbox:s}};var a=function(c,f,t){let M=10*Math.random(),e=0,o=0,r=1,u=1,d=0,h=3;const i=new v(c,f,0,0,0,0),g=[["#fff",5,0],[0,-13,4,-29,13,-40],[0,-16,-2,-17],[2,-22,-3,-24],[4,-28,0,-30],[6,-33,4,-35]],p=[["#fff",5,0],[-8,0,0,-13,8,0]],m=[["#fff",5,0],[0,0,14,15]],y=[["#fff",9,0],[3,10,-3,10,-3,0,-6,-4,0,-10,6,-4,3,0,3,10],["#000",4,5],[-5,-6,-3,-5],[5,-6,3,-5]];function s([t,n]){i.isTouching(t)&&(e=600*n,r=-Math.sign(n),d=1,--h)}return n("attack",s),{update:function(t){if(h<=0)return w("bone:spawn",[c,f-55,4]),n=s,l[a="attack"]=(l[a]||[]).filter(t=>t!=n),!0;var n,a=!1;o+=1400*t,[c,f,a,onRightWall,onLeftWall,onRoof]=T(b.physics,i),onRightWall&&(r=-1),onLeftWall&&(r=1),(a||onRoof)&&(o=0),d<=0&&(e=60*u,.98<Math.random&&(r=-r)),0<d&&(e-=12*e*t),M+=t,c+=e*t,f+=o*t,u+=8*(r-u)*t,d=Math.max(0,d-2*t),i.set(c,f,-20,-59,40,60)},render:function(t){var n=.6*u,a=6*M,e=t.getTransform(),o=(o=1.3,r=c,h=f,x.translate(r,h),x.scale(o,o),x.translate(-r,-h),Math.cos(a)/20*1-u*d*.3),r=7*n*1+50*o,h=0*(-33-2*n+Math.cos(a))+ +(-33-2*n+Math.cos(a-1)),i=7*n*1+50*o,s=0*(2*n-33+Math.cos(a))+ +(2*n-33+Math.cos(2+a)),l=+(-40+Math.cos(1+a));p[1][0]=8*Math.cos(a)*u*1,p[1][1]=4*Math.min(0,Math.sin(a))*1,p[1][4]=8*Math.cos(3+a)*u*1,p[1][5]=4*Math.min(0,Math.sin(3+a))*1,.2<d&&(t.globalAlpha=0<Math.cos(25*d)?.2:1),Y(p,c,f,0,n,0),Y(m,c+r,f+h,-4,2.1*n,-n/3),Y(m,c+i,f+s,4,2.1*n+3.14,-n/3),Y(g,c,f,0,2*n-1.57,o),Y(y,c,f+l,23+70*o*u,-n,-d*u*.6),t.globalAlpha=1,t.setTransform(e)},order:500,tags:["enemy"],enemyHitbox:i}};var o=function(e,o,n,a){let r=7*Math.random(),h=7*Math.random(),i=0,s=!1,l=0;const c=new v(e,o,1,1),f=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){if(r+=t,l+=t,a+=2e3*t,[e,o,onGround,onRightWall,onLeftWall,onRoof]=T(b.physics,c),(onRightWall||onLeftWall)&&(n=-n),onGround&&(a=300<a?-.4*a:0,n-=9*n*t),onRoof&&(a=0),s?i+=3*t:b.player.map(({playerHitbox:t})=>{c.isTouching(t)&&.5<l&&(s=!0,w("bone:collect",1))}),.5<i)return!0;e+=n*t,o+=a*t,c.set(e,o,-15,-20,30,40)},render:function(t){var n=3*r,a=.2*Math.cos(r+h)+h;s?(V(`rgba(255, 255, 180, ${1-2*i})`),t.beginPath(),t.arc(e,o,40*i+10,0,6.28),t.fill()):Y(f,e,o,0,n,a)},collectHitbox:c}};var d=new function(){let n=0,e=3;return{addHp:function(t){var n,a;e=(t=e+t,n=0,a=3,Math.max(Math.min(t,a),n))},getHp:function(){return e},getMaxHp:function(){return 3},addBones:function(t){n=Math.max(n+t,0)},getBones:function(){return n}}};var g=function(){let c=0;const f=[["#e22",9,0],[14,-40,18,-26,1,0,-1,0,-18,-26,-14,-40],[-7,-11,7,-11],["#fff",4,5],[-9,-11,-3,-9],[9,-11,3,-9]],M=[["#fff",6,0],[-11,-7,-7,-7,7,7,7,11],[-7,-11,-7,-7,7,7,11,7]];return{update:function(t){c+=t},render:function(t){const n=d;var a,e,o,r,h,i,s=t.getTransform(),l=(t.setTransform(1,0,0,1,0,0),t.scale(.8,.8),n.getMaxHp(),n.getHp());for(let t=0;t<n.getMaxHp();t++)t>=l?(f[0][0]="#555",f[3][0]="#555"):(f[0][0]="#e22",f[3][0]="#fff"),Y(f,50+55*t,72,0,0,0);Y(M,50,103,0,c,0),a=n.getBones(),e=70,o=105,r="#fff",h=30,i="left",x.fillStyle=r,x.textAlign=i,x.font=`bold ${h}px arial`,x.fillText(a,e,o),t.setTransform(s)},order:1e4}};var p=function(r,h){let i=0,s=0;return n("player:hit",()=>s=.5),{update:function(t){i+=t;var n,a,e,o=b.player[0];o&&(e=o.playerHitbox.x,o=o.playerHitbox.y,{width:a,height:n}=c,(r=e<r-(a=a/4)?e+a:r)+a<e&&(r=e-a),(h=o<h-(e=n/4)?o+e:h)+.8*e<o&&(h=o-.8*e)),s=Math.max(s-t,0)},set:function(t){var n=3*Math.cos(i)+15*Math.cos(40*i)*s,a=3*Math.cos(.8*i)+8*Math.cos(23*i)*s;t.translate(-r+c.width/2+n,-h+c.height/2+a)},order:-1e4,tags:["camera"]}};requestAnimationFrame(s),e(new p(150,400)),e(new t(150,400)),e(new a(500,439)),e(new o(300,300,0,0)),e(new g),e({tags:["physics"],physics:new v(0,440,0,0,800,100)}),e({tags:["physics"],physics:new v(650,100,0,0,100,340)}),e({tags:["physics"],physics:new v(250,340,0,0,100,100)}),n("bone:spawn",([t,n,a])=>{for(;0<a--;)e(new o(t,n,400*(Math.random()-.5),300*-Math.random()-200))}),n("bone:collect",t=>d.addBones(t)),n("player:hit",t=>d.addHp(-t))})();</script></html>